var x=Object.defineProperty;var F=(i,e,t)=>e in i?x(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var r=(i,e,t)=>(F(i,typeof e!="symbol"?e+"":e,t),t);import{c as C,M as m,a as c,T as V,g as H,A as U}from"./style.199221b6.js";import{a as Q}from"./app.bc396469.js";import{r as L,P as B}from"./paymentService.dcb6aaba.js";class E{static validate(e){return!!String(e).toLowerCase().match(/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i)}}const f={shortestTimeDelivery:"shortest-time-delivery",nextBusinessDayDelivery:"next-business-day-delivery",economyDelivery:"economy-delivery",premiumPlusFixed:"premium-plus-fixed-time"},u={premium:"premium",economy:"economy",premiumPlus:"premium-plus",economyPlus:"economy-plus"};var R;class _{constructor(){r(this,"fromCompanyName",null);r(this,"fromAddress",null);r(this,"fromDetails",null);r(this,"fromCity",null);r(this,"toCompanyName",null);r(this,"toAddress",null);r(this,"toDetails",null);r(this,"toCity",null);r(this,"lift",!1);r(this,"pickupDate",null);r(this,"pickupTime",null);r(this,"transitTime",null);r(this,"deliveryDate",null);r(this,"deliveryVariant",f.shortestTimeDelivery);r(this,"size",null);r(this,"loadDetails",null);r(this,"shipperVatPrefix",navigator.language.substr(-2).toUpperCase());r(this,"shipperVatNo",null);r(this,"shipperNameOrVatNo",null);r(this,"shipperName",null);r(this,"shipperAddress",null);r(this,"shipperEmail",null);r(this,"shipperContactPerson",null);r(this,"shipperPhonePrefix",((R=C.find(e=>e.code===navigator.language.substr(-2).toUpperCase()))==null?void 0:R.dial_code)||"+44");r(this,"shipperPhoneNo",null);r(this,"terms",!1);r(this,"ferry",!1);r(this,"duty",!1);r(this,"cargoDescription",null);r(this,"distance",null);r(this,"premiumPrice",null);r(this,"premiumPlusPrice",null);r(this,"driverHelpLoading",!1);r(this,"driverHelpUnloading",!1);r(this,"product",null);r(this,"economyOption",null);r(this,"economyPlusOption",null);r(this,"economyPickupDate",null);r(this,"deliveryDateTo",null);r(this,"paymentOption",null);r(this,"price",null);r(this,"routes",null);r(this,"discounts",[]);r(this,"customQuoteShipperEmail",null);const e=new URLSearchParams(location.search);this.from=e.get("from"),this.fromCountry=e.get("fromCnt"),this.fromPosition=e.get("fromPos"),this.fromPostcode=e.get("fromPco"),this.fromEst=e.get("fromEst")==="true",this.to=e.get("to"),this.toCountry=e.get("toCnt"),this.toPosition=e.get("toPos"),this.toPostcode=e.get("toPco"),this.toEst=e.get("toEst")==="true",this.van=e.get("van")||"plane",this.shipperCountryCode=e.get("fromCnt"),this.fromCity=this._getCityFromAddress(this.from),this.toCity=this._getCityFromAddress(this.to)}get isEconomy(){return this.product&&(this.product===u.economy||this.product===u.economyPlus)}get isPremium(){return this.product&&!this.isEconomy}isScandinaviaDisabled(e){const t=e.premiumPriceAvailability.unavailabilityReason=="shipment-in-scandinavia",o=e.premiumPriceAvailability.isPremiumAvailable;return t&&!o}get isFixedPickupTime(){var e,t;return((e=this.pickupTime)==null?void 0:e.from)===((t=this.pickupTime)==null?void 0:t.to)}get isDiscountsAvailable(){var e;return((e=this.discounts.types)==null?void 0:e.length)>0}_getCityFromAddress(e){if(!e)return null;const t=e.split(",");return t.length<2?e:t[t.length-2].trim()}}class ${constructor(e,t){r(this,"vanSearchModal",null);r(this,"wasModalShown",!1);r(this,"modalId","vanSearchModal");this.i18n=e,this.onFinishCallback=t}showVanSearchModal(){if(this.wasModalShown){this.onFinishCallback();return}this.vanSearchModal=new m(document.getElementById(this.modalId),{backdrop:"static",keyboard:!1});const e=document.querySelectorAll(`#${this.modalId} span`);e[0].innerHTML=this.i18n.t("lookingForVansMatching"),e[1].innerHTML=this.i18n.t("itWillTakeFewSeconds"),this.prepareProgressBar(),this.vanSearchModal.show(),this.wasModalShown=!0}prepareProgressBar(){const e=document.querySelector(`#${this.modalId} .progress`);e.style.display="block",e.addEventListener("animationend",()=>this.finishSearchingVan())}hideVanSearchModal(){var e;(e=this.vanSearchModal)==null||e.hide()}finishSearchingVan(){const t=document.querySelectorAll("#vanSearchModal span");t[0].innerHTML=this.i18n.t("successWeFoundVan"),t[1].innerHTML=this.i18n.t("completeCompanyDetailsToBook"),document.querySelector("#vanSearchModal .progress").style.display="none",setTimeout(()=>{this.onFinishCallback(),this.hideVanSearchModal()},3e3)}}class W{constructor(e){r(this,"limits",{length:900,height:260,width:245,capacity:45,pallets:22,weight:8500});r(this,"entireVanLimits",{plane:{length:420,height:220,width:220,capacity:22,pallets:8,weight:1100},box:{length:360,height:170,width:170,capacity:10,pallets:6,weight:1100},frigo:{length:420,height:220,width:220,capacity:20,pallets:5,weight:800}});r(this,"liftWeight",400);r(this,"pallets",{quantity:1,code:"euro_pallet",weight:null,selected:!1,width:120,length:80,get wasAnyUserInteraction(){return this.weight!==null}});r(this,"bulk",{code:"bulk",volume:null,weight:null,selected:!1,get wasAnyUserInteraction(){return this.weight!==null||this.volume!==null}});r(this,"fullTruck",{weight:null,description:null,selected:!1,isNonstandardTruck:!1,get wasAnyUserInteraction(){return this.weight!==null||this.description!==null}});r(this,"customLoads",[]);r(this,"maxLdm",9.2);if(new URLSearchParams(window.location.search).get("orderId")&&localStorage.getItem("orderDetails")){const o=JSON.parse(localStorage.getItem("orderDetails"));let s=0;o.orderLoadDetails.forEach(a=>{switch(a.code){case"bulk":{this.selectBulk(),this.bulk.volume=a.volume,this.bulk.weight=a.weight;break}case"euro_pallet":{this.selectPallets(),this.pallets.quantity=a.quantity,this.pallets.weight=a.weight;break}case"custom_load":{this.addCustomLoad();const n=this.customLoads[s];n.weight=a.weight,n.height=a.height,n.length=a.length,n.width=a.width,s++;break}}}),o.isFullTruck&&(this.selectFullTruck(),this.fullTruck.weight=o.weight||0,this.fullTruck.description=(o==null?void 0:o.fullTruckCargoDescription)||"")}this.quote=e}get loads(){const e=[this.pallets,this.bulk,this.fullTruck].filter(t=>t.selected);return e.push(...this.customLoads),e}get maxPallets(){return this.limits.pallets}get isLdmAboveLimits(){let e=0;const t=.4,o=.2,s=240,a=100;return this.pallets.selected&&(e+=t*this.pallets.quantity),this.bulk.selected&&(e+=o*this.bulk.volume),this.customLoads.length&&this.customLoads.forEach(n=>{e+=n.width*n.length*n.quantity/s/a}),e>this.maxLdm}get isFullTruck(){return this.fullTruck.selected}get isPartLoad(){return this.customLoads.length||this.bulk.selected||this.pallets.selected}get isAnyLoadSelected(){return this.isPartLoad||this.isFullTruck}get totalCargoWeight(){var t,o,s;return parseInt(this.customLoads.reduce((a,n)=>a+n.weight,0))+((t=this.bulk.weight)!=null?t:0)+((o=this.fullTruck.weight)!=null?o:0)+((s=this.pallets.weight)!=null?s:0)}get weightLimit(){var a,n;const e={CH:{lift:{plane:400,box:400,frigo:250},noLift:{plane:650,box:800,frigo:500}},AT:{lift:{plane:700,box:700,frigo:250},noLift:{plane:900,box:1e3,frigo:500}},ES:{lift:{plane:700,box:700,frigo:400},noLift:{plane:900,box:1e3,frigo:700}},PT:{lift:{plane:700,box:700,frigo:400},noLift:{plane:900,box:1e3,frigo:700}}};if(this.isRouteThroughSwitzerland)return e.CH[this.quote.lift?"lift":"noLift"][this.quote.van];const t=this.entireVanLimits[this.quote.van].weight-(this.quote.lift?this.liftWeight:0),o=((a=e[this.quote.fromCountry])==null?void 0:a[this.quote.lift?"lift":"noLift"][this.quote.van])||t,s=((n=e[this.quote.toCountry])==null?void 0:n[this.quote.lift?"lift":"noLift"][this.quote.van])||t;return o<s?o:s}get isRouteThroughSwitzerland(){const e=["DE","IT"];if(!e.includes(this.quote.fromCountry)||!e.includes(this.quote.toCountry)||this.quote.fromCountry===this.quote.toCountry)return!1;const t={DE:["4","5","6"],IT:["1"]};return!(t[this.quote.fromCountry].includes(this.quote.fromPostcode[0])&&t[this.quote.toCountry].includes(this.quote.toPostcode[0]))}get isWeightCorrect(){return this.totalCargoWeight&&this.totalCargoWeight>0}get arePalletsValid(){return this.pallets.quantity>0&&this.pallets.weight>0}get isBulkValid(){return this.bulk.volume>0&&this.bulk.weight>0}addCustomLoad(){this.customLoads.push(new Y)}wasFieldModifiedByUser(e){return e!==null}selectPallets(){this.pallets.selected=!0}incrementPalletsCount(){this.pallets.quantity+=1}decrementPalletsCount(){this.pallets.quantity=Math.max(this.pallets.quantity-1,1)}isCustomLoadValid(e){return!Object.values(e).some(t=>!t||t<1)}removeCustomLoad(e){const t=this.customLoads.indexOf(e);this.customLoads.splice(t,1)}selectBulk(){this.bulk.selected=!0}removeBulk(){this.bulk.volume=null,this.bulk.weight=null,this.bulk.selected=!1}selectFullTruck(){this.fullTruck.selected=!0}toggleBiggerVan(){this.fullTruck.isNonstandardTruck=!this.fullTruck.isNonstandardTruck}removeFullTruck(){this.fullTruck.weight=null,this.fullTruck.selected=!1,this.fullTruck.description=null,this.fullTruck.isNonstandardTruck=!1}removePallets(){this.pallets.weight=null,this.pallets.quantity=1,this.pallets.selected=!1}}class Y{constructor(){r(this,"code","custom_load");r(this,"width",null);r(this,"length",null);r(this,"height",null);r(this,"quantity",1);r(this,"weight",null)}get wasAnyUserInteraction(){return this.width!==null||this.length!==null||this.height!==null||this.weight!==null||this.quantity!==1}incrementNumberOfLoads(){this.quantity+=1}decrementNumberOfLoads(){this.quantity=Math.max(this.quantity-1,1)}}class G{static getCalendar(e,t,o){return L("getCalendar").then(s=>fetch(`${c.API_CALENDAR_URL}?countryFrom=${e}&countryTo=${t}&vehicleType=${o}&captcha=${s}`)).then(s=>s.json().then(a=>({ok:s.ok,status:s.status,json:a}))).then(s=>{if(!s.ok)throw new Error("Calendar error: "+s.status+" "+s.statusText+" "+JSON.stringify(s.json));return s.json})}}const p=(i,e)=>{if(i===e||!e){const s=new Date;return s.setHours(i),s.setMinutes(0),s.toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"})}const t=new Date;t.setHours(i),t.setMinutes(0);const o=new Date;return o.setHours(e),o.setMinutes(0),`${t.toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"})} - ${o.toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"})}`},S=[{label:p(8,12),from:8,to:12,fixedHoursConnected:[{label:p(8),from:8,to:8},{label:p(9),from:9,to:9},{label:p(10),from:10,to:10},{label:p(11),from:11,to:11}]},{label:p(12,16),from:12,to:16,fixedHoursConnected:[{label:p(12),from:12,to:12},{label:p(13),from:13,to:13},{label:p(14),from:14,to:14},{label:p(15),from:15,to:15}]},{label:p(16,20),from:16,to:20,fixedHoursConnected:[{label:p(16),from:16,to:16},{label:p(17),from:17,to:17}]},{label:"allDay",from:8,to:16,deliveryCalculationHour:16,fixedHoursConnected:[]}],z=[{label:p(16,20),from:16,to:20,deliveryCalculationHour:16,fixedHoursConnected:[{label:p(15),from:15,to:15},{label:p(16),from:16,to:16},{label:p(17),from:17,to:17}]}],I=6,J=0;class j{constructor(e,t){r(this,"calendar",{availableDates:[],holidays:[],holidaysPoland:[]});r(this,"nextDay",!1);r(this,"deliveryDate",null);r(this,"customQuoteDeliveryDate",null);r(this,"deliveryBetweenDays",null);r(this,"deliveryBetweenDaysEnd",null);r(this,"economyPickupDate",null);r(this,"weekdays",Array.from({length:7},(e,t)=>new Date(2021,1,t+1)));r(this,"days",[]);r(this,"twoMonths",[]);r(this,"pickupTime",null);r(this,"deliveryTime",null);r(this,"deliveryVariant",null);r(this,"wasModalOpened",!1);r(this,"startOfRangePickup",null);r(this,"endOfRangePickup",null);r(this,"startOfRangeDelivery",null);r(this,"endOfRangeDelivery",null);this.pickupDate=t.pickupDate,this.quote=t,this.product=e,this.populateDays(),this.getCalendar(),this.populateSecondMonth()}get isPickupSlotSelected(){return this.pickupTime&&this.pickupTime.from!==this.pickupTime.to}get isFixedPickupHourSelected(){return this.pickupTime&&this.pickupTime.from===this.pickupTime.to}get isEconomy(){return this.product===u.economy||this.product===u.economyPlus}getSelectedProductRoute(e=this.product){var t;return e===u.premiumPlus?this.quote.routes.premiumPlusRoute:(t=this.quote.routes)==null?void 0:t.classicRoute}getAvailableFixedPickupHours(e,t=this.product){return e?this.getAvailablePickupTimeSlots(e,t).map(o=>o.fixedHoursConnected).flat():[]}getAvailableFixedDeliveryHours(e){return e?this.getAvailableDeliveryTimeSlots(e).map(t=>t.fixedHoursConnected).flat():[]}getAvailableDeliveryTimeSlots(e){return e?S.filter(t=>!this.isInvalidPickupHour(e,t.from)):[]}selectDeliveryTime(e){this.deliveryTime=e}getNextWorkingBusinessDay(e){const t=new Date(e);do t.setDate(t.getDate()+1);while(this.isDayNonBusiness(t));return t}getEarliestPickup(e,t=!1){if(this.isSoloVan=t,e===u.premiumPlus){let l=new Date;if(t)return l=this.getNextWorkingBusinessDay(new Date),l.setHours(12,0,0,0),l;if(this.isSameDayPickupAvailable(u.premiumPlus))return l.setHours(this.getAvailableFixedPickupHours(l,u.premiumPlus)[0].from),l.setMinutes(0),l}if(e===u.premium&&t){let l=this.getNextWorkingBusinessDay(new Date);return l=this.getNextWorkingBusinessDay(l),l.setHours(12,0,0,0),l}let o=0,s=null;do s=new Date(new Date(this.calendar.availableDates[o])),o++;while(this.isDayWithoutValidPickupSlots(s,e));const a=this.getAvailableFixedPickupHours(s)[0].from;if(s.setHours(a),s.setMinutes(0),t&&(s=this.getNextWorkingBusinessDay(s)),e===u.premium||e===u.premiumPlus)return s;const n=this.calculateEconomyPickupRangeEnd(s,e);return s.setHours(8),n.setHours(16),[s,n]}getEarliestDelivery(e,t){const o=this.getEarliestPickup(e,t);if(e===u.premium||e===u.premiumPlus)return this.getNormalDeliveryDate(o,e);o[0].setHours(16);const s=this.getNextBusinessDay(o[0],e),a=this.calculateEconomyDeliveryRangeEnd(s,e);return s.setHours(8),a.setHours(16),[s,a]}isNextBusinessDayAvailableOnPremiumPlus(){return this.getPremiumPlusFixedDeliveryTimes().every(e=>{if(!e)return!0;const t=new Date(e.value);return this.isDateTimeOutsideNormalWorkingHours(t)||this.isDayNonBusiness(t)})}getAvailablePickupTimeSlots(e,t=this.product){if(!e)return[];const o=new Date;if(t===u.premiumPlus&&this.isSameDayPickupAvailable(u.premiumPlus)&&e.toISOString().substring(0,10)===o.toISOString().substring(0,10))return z;const s=12;return S.filter(a=>this.isSoloVan&&(t===u.premium||t===u.premiumPlus)&&parseInt(a.from)<s?!1:!this.isInvalidPickupHour(e,a.from))}getCalendar(){return this.calendar.holidays=[],G.getCalendar(this.quote.fromCountry,this.quote.toCountry,this.quote.van).then(e=>{this.calendar.availableDates=e.availableDateLoadPlace,this.calendar.holidays=e.holidaysUnloadPlace,this.calendar.holidaysPoland=e.holidaysPoland,localStorage.holidaysPoland=JSON.stringify(e.holidaysPoland),this.populateDays(new Date(this.calendar.availableDates[0]))}).catch(e=>{var t;console.error(e),(t=window.Sentry)==null||t.captureException(e)})}initializeDateRange(e,t=!1){const o=this.calendar.availableDates.some(h=>new Date(h).getMonth()===new Date().getMonth());let s=e||new Date;!e&&!o&&s.setMonth(new Date().getMonth()+1);let a=new Date(s.getFullYear(),s.getMonth()+(t?1:0),1);const n=[],l=1;for(;a.getDay()!==l;)n.push(new Date(a)),a.setDate(a.getDate()-1);return a.setHours(12),a.setDate(a.getDate()-(a.getDay()+I)%7),{targetDate:a,now:s,disabled:n}}populateDaysGeneric(e,t,o){const{targetDate:s,now:a,disabled:n}=this.initializeDateRange(t,o);for(e.length=0;this.shouldIncludeDate(s,a,o);s.setDate(s.getDate()+1)){const l=new Date(s);e.push({date:l,selected:this.isDateSelected(l),selectedDelivery:this.getDayMonthYear(l)===this.getDayMonthYear(this.customQuoteDeliveryDate),selectedRangePickup:this.getDayMonthYear(l)===this.getDayMonthYear(this.startOfRangePickup)||this.getDayMonthYear(l)===this.getDayMonthYear(this.endOfRangePickup),selectedRangeDelivery:this.getDayMonthYear(l)===this.getDayMonthYear(this.startOfRangeDelivery)||this.getDayMonthYear(l)===this.getDayMonthYear(this.endOfRangeDelivery),disabled:this.isDayDisabled(l),disabledDaysPreviousMonth:n.some(h=>this.getDayMonthYear(h)===this.getDayMonthYear(l)),deliveryInRange:this.isDayInCustomQuoteRange(l),inRange:this.isDayInRange(l),inRangeCustomPickup:this.getDayMonthYear(l)>this.getDayMonthYear(this.startOfRangePickup)&&this.getDayMonthYear(l)<this.getDayMonthYear(this.endOfRangePickup),inRangeCustomDelivery:this.getDayMonthYear(l)>this.getDayMonthYear(this.startOfRangeDelivery)&&this.getDayMonthYear(l)<this.getDayMonthYear(this.endOfRangeDelivery)})}}populateDays(e){!this.calendar.availableDates.length||(this.populateDaysGeneric(this.days,e,!1),this.populateSecondMonth())}populateSecondMonth(e){!this.calendar.availableDates.length||this.populateDaysGeneric(this.twoMonths,e,!0)}shouldIncludeDate(e,t,o){return o?e.getMonth()===t.getMonth()+1||e.getMonth()===t.getMonth()||t.getMonth()===11&&e.getMonth()===0:e.getMonth()===t.getMonth()||e.getMonth()===t.getMonth()-1||e.getMonth()===(t.getMonth()+11)%12}isDateSelected(e){const t=this.getDayMonthYear(e);return t===this.getDayMonthYear(this.pickupDate)||t===this.getDayMonthYear(this.economyPickupDate)||t===this.getDayMonthYear(this.deliveryBetweenDays)}isDayBeforeSoloPickupTime(e){if(this.isSoloVan)switch(this.product){case u.premiumPlus:return e<this.getEarliestPickup(u.premiumPlus,!0);case u.premium:return e<this.getEarliestPickup(u.premium,!0);case u.economyPlus:return e<this.getEarliestPickup(u.economyPlus,!0)[0];case u.economy:return e<this.getEarliestPickup(u.economy,!0)[0]}return!1}isDayDisabled(e){return this.isHoliday(e)||e.getDay()===J||e.getDay()===I||!this.calendar.availableDates.includes(e.toISOString().substring(0,10))||this.isDayWithoutValidPickupSlots(e)||this.isDayBeforeSoloPickupTime(e)}isDayWithoutValidPickupSlots(e,t=this.product,o=!1){const s=new Date,a=new Date;a.setDate(s.getDate()+1);const n=e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth()&&e.getDate()===a.getDate();if(o&&n)return!1;if(t===u.premiumPlus){const l=new Date;if(e.toISOString().substring(0,10)===l.toISOString().substring(0,10))return!this.isSameDayPickupAvailable()}return t===u.economy||t===u.economyPlus?this.isInvalidPickupHour(e,8):S.every(l=>this.isInvalidPickupHour(e,l.from))}isSameDayPickupAvailable(e=this.product){if(e!==u.premiumPlus)return!1;const t=new Date,o=11;return t.getHours()<o}isDayInRange(e){if(!this.economyPickupDate||!this.pickupDate)return!1;const t=this.getDayMonthYear(this.economyPickupDate),o=this.getDayMonthYear(this.pickupDate),s=this.getDayMonthYear(e);return s>o&&s<t||s>this.startOfRangePickup&&s<this.endOfRangeDelivery}isDayInCustomQuoteRange(e){if(!this.pickupDate||!this.deliveryBetweenDays)return!1;const t=this.getDayMonthYear(this.pickupDate),o=this.getDayMonthYear(this.deliveryBetweenDays),s=this.getDayMonthYear(e);return s>t&&s<o}getDayMonthYear(e){return e==null?void 0:e.toISOString().split("T")[0]}selectDay(e,t=!1){if(e.disabled||!this.calendar.availableDates.includes(this.getDayMonthYear(e.date)))return;this.pickupTime&&(this.isInvalidPickupHour(e.date,this.pickupTime.from)?this.pickupTime=null:e.date.setHours(this.pickupTime.from)),this.pickupDate=new Date(e.date),this.isEconomy?(this.economyPickupDate=this.calculateEconomyPickupRangeEnd(),this.pickupTime=S.find(s=>!s.fixedHoursConnected.length),this.deliveryDate=this.getNextBusinessDay(),this.economyDeliveryDate=this.calculateEconomyDeliveryRangeEnd(),this.deliveryVariant=f.economyDelivery):this.deliveryDate&&(this.areTwoOptionsAvailable()||(this.deliveryVariant=f.shortestTimeDelivery),this.deliveryDate=this.deliveryVariant===f.shortestTimeDelivery?this.getNormalDeliveryDate():this.getNextBusinessDay()),this.product==="economy-plus"&&(this.customQuoteDeliveryDate=new Date(e.date),this.customQuoteDeliveryDate.setDate(this.deliveryDate.getDate()+1)),this.populateDays(e.date);const o=e.date.getMonth()%12;this.populateSecondMonth(new Date(e.date.getFullYear(),o,1))}selectDeliveryDay(e){e.disabled||!this.calendar.availableDates.includes(this.getDayMonthYear(e.date))||(this.customQuoteDeliveryDate=new Date(e.date),this.populateDays(e.date))}selectDeliveryDayTwoMonthCalendar(e,t=!0){if(e.disabled||!this.calendar.availableDates.includes(this.getDayMonthYear(e.date)))return;t?this.startOfRangePickup?this.endOfRangePickup?this.startOfRangePickup&&this.endOfRangePickup&&(this.startOfRangePickup=new Date(e.date),this.endOfRangePickup=null):(this.endOfRangePickup=new Date(e.date),this.startOfRangePickup>this.endOfRangePickup&&([this.startOfRangePickup,this.endOfRangePickup]=[this.endOfRangePickup,this.startOfRangePickup])):this.startOfRangePickup=new Date(e.date):this.startOfRangeDelivery?this.endOfRangeDelivery?this.startOfRangeDelivery&&this.endOfRangeDelivery&&(this.startOfRangeDelivery=new Date(e.date),this.endOfRangeDelivery=null):(this.endOfRangeDelivery=new Date(e.date),this.startOfRangeDelivery>this.endOfRangeDelivery&&([this.startOfRangeDelivery,this.endOfRangeDelivery]=[this.endOfRangeDelivery,this.startOfRangeDelivery])):this.startOfRangeDelivery=new Date(e.date),this.populateDays(e.date);const o=e.date.getMonth()%12;this.populateSecondMonth(new Date(e.date.getFullYear(),o,1))}calculateEconomyPickupRangeEnd(e=this.pickupDate,t=this.product){const o=t===u.economy?2:3;let s=1;const a=new Date(e),n=new Date(this.calendar.availableDates[this.calendar.availableDates-1]);for(;s<o||a.getTime()<n.getTime();)a.setDate(a.getDate()+1),this.isDayNonBusiness(a)||s++;return a}calculateEconomyDeliveryRangeEnd(e=this.deliveryDate,t=this.product){const o=t===u.economy?3:4;let s=1;const a=new Date(e);for(;s<o;)a.setDate(a.getDate()+1),this.isDayNonBusiness(a)||s++;return a}selectPickupTime(e){this.pickupTime=e,this.pickupDate=new Date(this.pickupDate.getTime()),this.pickupDate.setHours(e.from),this.deliveryDate&&(this.areTwoOptionsAvailable()||(this.deliveryVariant=f.shortestTimeDelivery),this.deliveryDate=this.deliveryVariant===f.shortestTimeDelivery?this.getNormalDeliveryDate():this.getNextBusinessDay())}changeProduct(e){this.product=e,this.resetModal(e),this.populateDays(),this.populateSecondMonth(),this.wasModalOpened=!0}previousMonth(){const e=new Date(this.calendar.availableDates[0]),t=this.days[7].date.getMonth();if(e&&t===e.getMonth()-1||t===e.getMonth()+11)return;const s=new Date(this.days[7].date);s.setDate(1),s.setMonth(t-1),this.populateDays(s),this.populateSecondMonth(s)}nextMonth(){const e=new Date(this.calendar.availableDates[this.calendar.availableDates.length-1]),t=this.days[7].date.getMonth(),o=e&&t===e.getMonth()+1,s=e&&t===0&&e.getMonth()===11;if(o||s)return;const a=new Date(this.days[7].date);a.setDate(1),a.setMonth(t+1),this.populateDays(a,!1),this.populateSecondMonth(a,!1)}getNextBusinessDay(e=this.pickupDate,t=this.product){let o=new Date(this.getNormalDeliveryDate(e,t));for(o.getHours()>12&&o.setDate(o.getDate()+1);this.isDayNonBusiness(o);)o.setDate(o.getDate()+1);return o.setHours(8),o}getNormalDeliveryDate(e=this.pickupDate,t=this.product){var s,a;if(!e)return null;const o=new Date(e);return o.setHours(((a=(s=this.pickupTime)==null?void 0:s.deliveryCalculationHour)!=null?a:e.getHours())+(this.isSoloVan?this.getSelectedProductRoute(t).soloTransitTime:this.getSelectedProductRoute(t).transitTime)),o}getPremiumPlusFixedDeliveryTimes(){function*e(s){let a=0;for(;;){let n=new Date(s);n.setHours(n.getHours()+a),a++,yield n}}if(!this.getNormalDeliveryDate())return[];const t=20,o=e(this.getNormalDeliveryDate());return Array.from(Array(t)).map(s=>{const a=o.next().value;return{label:a.toLocaleDateString(void 0,{hour:"numeric",minute:"numeric",month:"numeric",day:"numeric",year:"numeric"}),value:a}})}selectPremiumPlusFixedDeliveryTime(e){this.setDeliveryDate(new Date(e),!0),this.deliveryVariant=f.premiumPlusFixed}isDeliveryTimeOnNonBusinessDay(){return this.isEconomy||!this.pickupTime?!1:this.isDayNonBusiness(this.deliveryDate)}isDayNonBusiness(e){return(e==null?void 0:e.getDay())===6||(e==null?void 0:e.getDay())===0||this.isHoliday(e)}isDeliveryTimeOutsideNormalWorkingHours(){return this.isEconomy||!this.pickupTime?!1:this.isDateTimeOutsideNormalWorkingHours(this.deliveryDate)}isDateTimeOutsideNormalWorkingHours(e){const t=[4,15];return(e==null?void 0:e.getHours())<t[0]||(e==null?void 0:e.getHours())>=t[1]}isHoliday(e){const t=e.toISOString().substring(0,10),o=this.calendar.availableDates[this.calendar.availableDates.length-1];return e&&(this.calendar.holidaysPoland.includes(t)||!this.calendar.availableDates.includes(t)&&t<o)}isInvalidPickupHour(e,t){t=parseInt(t);const a=new Date(e);a.setHours(t);const n=new Date;n.setDate(n.getDate()+1);let l=0;for(;n.getDate()!==a.getDate();)this.isDayNonBusiness(n)&&l++,n.setDate(n.getDate()+1);return new Date().getTime()+17*36e5+l*24*36e5>a}resetModal(e,t=!1){this.product=e,e===this.quote.product&&!t?(this.pickupDate=this.quote.pickupDate||new Date,this.nextDay=this.quote.nextDay,this.deliveryDate=this.quote.deliveryDate,this.pickupTime=this.quote.pickupTime,this.deliveryVariant=this.quote.deliveryVariant,this.economyPickupDate=this.quote.economyPickupDate):(this.pickupDate=this.nextDay=this.deliveryDate=this.pickupTime=this.economyPickupDate=this.economyDeliveryDate=this.customQuoteDeliveryDate=this.deliveryBetweenDays=this.deliveryBetweenDaysEnd=null,this.deliveryVariant=null)}areTwoOptionsAvailable(){if(!this.pickupTime)return!1;const e=this.isDateTimeOutsideNormalWorkingHours(this.getNormalDeliveryDate());return this.getNormalDeliveryDate().getDate()!==this.getNextBusinessDay().getDate()||e}setDeliveryDate(e,t){this.deliveryDate=e,this.nextDay=t}saveDate(){this.nextDay=this.deliveryVariant===f.nextBusinessDayDelivery||this.deliveryVariant===f.premiumPlusFixed,this.quote.nextDay=this.nextDay,this.quote.pickupDate=this.pickupDate,this.quote.pickupTime=this.pickupTime,this.quote.deliveryDate=this.deliveryDate,this.quote.product=this.product,this.quote.deliveryVariant=this.deliveryVariant,this.quote.price=this.product===u.economy?this.quote.economyOption.price:this.product===u.economyPlus?this.quote.economyPlusOption.price:this.product===u.premium?this.quote.premiumPrice:this.product===u.premiumPlus?this.quote.premiumPlusPrice:null,this.quote.economyPickupDate=this.economyPickupDate;const e=new Date(this.deliveryDate);this.nextDay||e.setHours(e.getHours()+4),this.quote.deliveryDateTo=this.isEconomy?this.economyDeliveryDate:e,this.quote.distance=this.getSelectedProductRoute().distance,this.quote.transitTime=this.getSelectedProductRoute().transitTime,this.quote.ferry=this.getSelectedProductRoute().ferry}}const P={tailLift:"Tail lift",helpWithLoading:"Help with loading",helpWithUnloading:"Help with unloading",AdrMaterials:"Transporting ADR materials (e.g. dangerous substances like chemicals)"},v={fixedDate:"fixedDate",betweenDates:"betweenDates",noTimeYet:"noTimeYet"},K={notCurtainSider:"not-curtain-sider",entireVanSelected:"entire-van-selected",weightTooLarge:"weight-too-large",dutyRequired:"duty-required",ldmTooLarge:"ldm-too-large",priceTooHigh:"price-too-high"},w={PayNow:"PayNow",PayAfterDelivery:"PayAfterDelivery"};function Z(i,e){return i?!e:e}var X=[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}];class ee{constructor(e,t){r(this,"el",[].find.call(document.querySelectorAll("#routeMap, #routeMapMobile"),e=>getComputedStyle(e).display!=="none"));r(this,"map",null);r(this,"google",null);r(this,"directionsRenderer",null);this.quote=e,this.i18n=t}setGoogle(e){this.google=e,this.initMap()}initMap(){this.map=new this.google.maps.Map(this.el,{center:{lat:49.85,lng:9.9},zoom:3,minZoom:3,disableDefaultUI:!0,fullscreenControl:!0,zoomControl:!0,styles:X}),this.directionsRenderer=new this.google.maps.DirectionsRenderer({polylineOptions:{strokeColor:"#3EC227"},suppressMarkers:!0,suppressInfoWindows:!0}),this.directionsRenderer.setMap(this.map)}async getRoute(){if(!this.quote.fromPosition||!this.quote.toPosition)return;const e=await new this.google.maps.DirectionsService().route({origin:this.getLatLng(this.quote.fromPosition),destination:this.getLatLng(this.quote.toPosition),travelMode:this.google.maps.TravelMode.DRIVING,avoidFerries:this.couldNotUseFerries(),avoidTolls:!1,optimizeWaypoints:!1,waypoints:this.getRouteWaypoints()});e.distance=Math.round(e.routes[0].legs[0].distance.value/1e3);const t=await this.getTransitTime(e.distance,e.routes[0].legs[0].duration.value);return e.transitTime=t.vanTransitTime.premiumTime,e.soloTransitTime=t.soloTransitTime.premiumTime,e.ferry=e.routes[0].legs[0].steps.some(o=>o.maneuver==="ferry"),new google.maps.DirectionsService().route({origin:this.getLatLng(this.quote.fromPosition),destination:this.getLatLng(this.quote.toPosition),travelMode:google.maps.TravelMode.DRIVING,avoidFerries:this.couldNotUseFerries(),avoidTolls:!0,optimizeWaypoints:!1,waypoints:this.getRouteWaypoints()}).then(async o=>{this.drawMap(e),o.distance=Math.round(o.routes[0].legs[0].distance.value/1e3);const s=await this.getTransitTime(o.distance,o.routes[0].legs[0].duration.value);return o.transitTime=s.vanTransitTime.economyTime,o.soloTransitTime=s.soloTransitTime.economyTime,o.ferry=o.routes[0].legs[0].steps.some(a=>a.maneuver==="ferry"),{classicRoute:o,premiumPlusRoute:e}})}drawMap(e){this.directionsRenderer.setDirections(e),this.createMapMarkers(this.i18n.current,e),this.google.maps.event.addListenerOnce(this.map,"tilesloaded",()=>this.map.fitBounds(e.routes[0].bounds))}createMapMarkers(e,t){const o=`/img/routePin-${e==="fr"?"chargement":"pickup"}.svg`,s=`/img/routePin-${e==="fr"?"livraison":"delivery"}.svg`;new this.google.maps.Marker({map:this.map,position:t.routes[0].legs[0].start_location,icon:{url:o,anchor:{x:157.7,y:12.5}}}),new this.google.maps.Marker({map:this.map,position:t.routes[0].legs[0].end_location,icon:{url:s,anchor:{x:157.7,y:12.5}}})}couldNotUseFerries(){const e=["FI"];return!(e.includes(this.quote.fromCountry.toUpperCase())||e.includes(this.quote.toCountry.toUpperCase()))}getRouteWaypoints(){const e={lat:47.269212,lng:11.404102},t={lat:47.005673,lng:11.505528},o={lat:44.38111289903153,lng:6.63022997761813},s={lat:45.76342,lng:4.834277},a={lat:47.05048,lng:5.25608},n=this.quote.fromCountry.toUpperCase(),l=this.quote.toCountry.toUpperCase(),h=this.quote.fromPostcode,d=this.quote.toPostcode;if(n==="DE"&&l==="IT"||n==="IT"&&l==="DE"){if(n==="DE"&&/^(0|1|2|3|7|8|9)/.test(h)||l==="DE"&&/^(0|1|2|3|7|8|9)/.test(d))return[{location:e,stopover:!1}];if(/^(4|5|6)/.test(h)||/^(4|5|6)/.test(d)){if(n==="DE"&&/^(4|5|6)/.test(h)&&l==="IT"&&/^1/.test(d)||n==="IT"&&/^1/.test(h)&&l==="DE"&&/^(4|5|6)/.test(d)){if(n==="DE"&&l==="IT")return[{location:s,stopover:!1},{location:o,stopover:!1}];if(n==="IT"&&l==="DE")return[{location:o,stopover:!1},{location:s,stopover:!1}]}if(!/^1/.test(d)&&!/^1/.test(h))return[{location:e,stopover:!1},{location:t,stopover:!1}]}}if(n==="CH"||l==="CH")return[{location:a,stopover:!1}];const y={lat:59.83592179224286,lng:24.81381524026508},g={lat:55.516639,lng:9.759},q="DK",b=["FI"];if(b.includes(this.quote.fromCountry.toUpperCase())||b.includes(this.quote.toCountry.toUpperCase()))return this.quote.fromCountry===q&&this.isRoutePointOnDenmarkBigIsland(this.quote.fromPosition)?[{location:g,stopover:!1},{location:y,stopover:!1}]:this.quote.toCountry===q&&this.isRoutePointOnDenmarkBigIsland(this.quote.toPosition)?[{location:y,stopover:!1},{location:g,stopover:!1}]:[{location:y,stopover:!1}];if(this.quote.fromCountry===q||this.quote.toCountry===q)return[];const A=["NO","SE"],N=A.includes(this.quote.fromCountry.toUpperCase()),M=A.includes(this.quote.toCountry.toUpperCase());return Z(N,M)?[{location:g,stopover:!1}]:[]}getLatLng(e){if(!e)return null;const t=e.split(",");return{lat:+t[0],lng:+t[1]}}isPointInsidePolygon(e,t){const o=e[0],s=e[1];let a=!1;for(let n=0,l=t.length-1;n<t.length;l=n++){let h=t[n][0],d=t[n][1],y=t[l][0],g=t[l][1];d>s!=g>s&&o<(y-h)*(s-d)/(g-d)+h&&(a=!a)}return a}isRoutePointOnDenmarkBigIsland(e){if(!Array.isArray(e)){const o=e=this.getLatLng(e);e=[o.lat,o.lng]}const t={funen:[[55.575463,9.934875],[55.675267,10.809613],[55.035534,10.836999],[55.028033,9.914392],[55.281405,9.791114],[55.466001,9.705467],[55.555707,9.791435]],longland:[[55.202605,10.828547],[55.201721,11.052528],[54.672578,10.804401],[54.958636,10.065265]],zealandFalsterLolland:[[54.581681,10.885137],[55.827333,10.795272],[56.297199,12.300668],[55.269179,13.237592],[54.430319,12.276835]]};return this.isPointInsidePolygon(e,t.funen)||this.isPointInsidePolygon(e,t.longland)||this.isPointInsidePolygon(e,t.zealandFalsterLolland)}getTransitTime(e,t){return fetch(c.API_TRANSIT_TIME+`?distance=${e}&transitTime=${t}`).then(o=>o.json()).catch(o=>{var s;(s=window.Sentry)==null||s.captureException(o),console.error("Error: calculating transit time: ",o)})}}const te=(i,e,t)=>i?e?e==="h"?i.toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"})+(t?"Fix":" - "+i.toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"})):i.toLocaleDateString(void 0,{weekday:e.includes("w")?"short":void 0,year:e.includes("y")?"numeric":void 0,month:"numeric",day:"numeric"}):i.toISOString():null,ie=(i,e=!1,t=!1)=>{if(!i)return"";if(i=new Date(i),!e)return i.toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"})+(t?" Fix":"");const o=i.toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"});i.setHours(i.getHours()+4);const s=i.toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"});return`${o} - ${s}`};class oe{constructor(){r(this,"isCustomQuote",!1);r(this,"showCalendarModal",!1);r(this,"isCargoDescriptionOnly",!1);r(this,"cargoDescription","");r(this,"optionalServices",[]);r(this,"isTailLiftChecked",!1);r(this,"isHelpLoadChecked",!1);r(this,"isHelpUnloadChecked",!1);r(this,"isAdrMaterialsChecked",!1);r(this,"adrMaterialsDescription","");r(this,"transportOptions",null);r(this,"productVariant","");r(this,"cargoWeight","")}openCalendarModal(){this.showCalendarModal=!0}closeCalendarModal(){this.showCalendarModal=!1}setCustomQuote(e){this.isCustomQuote=e}toggleOptionalService(e,t){if(t)this.optionalServices.push(e);else{const o=this.optionalServices.indexOf(e);o!==-1&&this.optionalServices.splice(o,1)}}getOptionalServices(){return this.optionalServices}}class se{static sendCustomQuote(e,t){return L("customQuote").then(o=>fetch(c.API_ORDERS_CUSTOM_QUOTE_URL.replace("{orderId}",t)+"?captcha="+o,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).then(o=>o.text().then(s=>({ok:o.ok,status:o.status,text:s}))).then(o=>{if(!o.ok)throw new Error("Custom quote error: "+o.status+" "+o.statusText+" "+o.text);return console.log("res",o),o.text})}}const O={solo:"solo",van:"van",custom:"custom"},k={firstOrder:"first-order",payNow:"pay-now",discountCode:"discount-code"};class ae{static sendGAEvent(e,t,o,s,a,n,l,h,d){if(!!o)return fetch(`${c.API_ORDERS_URL}/${o}/event?captcha=${h}&eventType=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientId:localStorage.clientId,sessionId:s,timezone:a,device:n,url:l,product:t,cargoType:d})})}}class re{static sendAgreements(e,t,o,s){const a=c.API_AGREEMENTS_URL.replace("{captcha}",s).replace("{clientEmail}",e);return fetch(a,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({marketingEmailAgreement:t,marketingSmsAgreement:o})})}}const T={orderBegin:"order_begin_product_mp",orderConfirm:"order_begin_confirm_mp",orderStep2:"order_step2_mp",orderStep1:"order_begin_cargo_mp"},D=new _;Q({quote:D,customQuote:new oe,cargoDetails:new W(D),datetimeSelection:new j(u,D),routeService:null,economyUnavailabilityReasons:K,deliveryVariants:f,vanSearchModalController:null,emailChanged:!0,cidSm:new URLSearchParams(location.search).get("cidSm"),wasSmCartSent:!1,route:null,loading:!1,error:!1,changeIndex:0,changeConfirmed:[!1,!1],validated:[!1,!1,!1],formValid:!1,locationFormShow:!1,shipperFormShow:!1,shippingFormShow:!1,orderId:null,pdfSrc:null,leadValid:!1,currentStep:1,isFirstOrder:!parseInt(localStorage.getItem("isNotFirstOrder")),mobileOrderSummaryExpanded:!1,mobileOrderSummaryExpanding:!1,maxStep:1,priceId:null,economyUnavailabilityReason:null,products:u,PaymentOptions:w,isCalendarLoaded:!1,showErrorsOnFirstStep:!1,transitTime:null,distance:null,formatDate:te,formatTime:ie,withoutLeadModal:new URLSearchParams(location.search).get("withoutLeadModal")==="true",temporaryAddress:null,quoteFromTemp:null,quoteToTemp:null,dataLayerSend:!1,scandinaviaDisabled:!1,referralCode:new URLSearchParams(location.search).get("kfl_ln"),customQuoteLiftValidated:!0,customQuoteDatesValidated:!0,customQuoteContactValidated:!0,customQuotePickupAndDeliveryValidated:!0,customQuoteADRDescriptionValidated:!0,customQuoteOptionalServices:P,customQuoteDeliveryTimeOptions:v,customQuoteRequestSent:!1,companyDetailsSubmited:!1,isSoloVan:!1,isSoloForEconomy:!1,discountCodeField:null,discountCode:null,invalidDiscountCode:!1,discountSet:!1,discountTypes:k,placeDataLoading:!1,totalWeightTooltipVisible:[],shippingOptionComparePicked:u.premiumPlus,userAgreements:{all:!1,done:!1,email:!1,sms:!1},async setupForm(){window.form=this,await this.getOrderDetails(),this.routeService=new ee(D,this.i18n),await this.setupAutocomplete(o=>{this.routeService.setGoogle(o),this.getRoute()}),this.setupTooltips(),this.setupStepChange(),this.vanSearchModalController=new $(this.i18n,()=>this.goTo(2));const i=localStorage.getItem("visitorEmail");if(localStorage.getItem("visitorPhoneNo"),!localStorage.getItem("visitorPhonePrefix")){let o=null;for(let s=0;s<C.length;s++)if(C[s].code===this.quote.fromCountry){o=C[s];break}this.quote.shipperPhonePrefix=o.dial_code,this.quote.shipperCountryCode=o.code}i?this.quote.shipperEmail=i:this.quote.fromPosition&&!this.withoutLeadModal&&this.showLeadCollectionModal();const t=setInterval(()=>{this.isCalendarLoaded=this.datetimeSelection.days.length>0,this.isCalendarLoaded&&clearInterval(t)},100)},getSummaryPrice(){var e,t,o,s,a,n;let i=0;return this.quote.price?i=this.quote.price:(t=(e=this.quote.economyPlusOption)==null?void 0:e.economyPriceAvailability)!=null&&t.isEconomyAvailable?i=(o=D.economyPlusOption)==null?void 0:o.price:(a=(s=this.quote.economyOption)==null?void 0:s.economyPriceAvailability)!=null&&a.isEconomyAvailable?i=(n=D.economyOption)==null?void 0:n.price:i=D.premiumPrice,this.formatQuantity(i||0)},async getOrderDetails(){const i=new URLSearchParams(window.location.search);if(this.orderId=i.get("orderId"),!this.quote.fromPosition)this.orderId&&this.reCaptcha("orderDetails").then(e=>fetch(c.API_ORDERS_URL+`/${this.orderId}?captcha=${e}`,{})).then(e=>e.json().then(t=>{let o=new URLSearchParams(window.location.search);const s=t.addressFrom||t.cityFrom,a=t.addressTo||t.cityTo,n=t.companyFrom||"",l=t.companyTo||"";o.append("from",`${n} ${s}`),o.append("fromCnt",`${t.countryCodeFrom}`),o.append("fromPco",`${t.fromPostalCode}`),o.append("to",`${l} ${a}`),o.append("toCnt",`${t.countryCodeTo}`),o.append("toPco",`${t.toPostalCode}`),o.append("lang",`${t.lang}`),o.append("orderId",`${this.orderId}`),o.append("van",`${t.vanType}`);const h=t.mailAddress||"";localStorage.setItem("visitorEmail",h),localStorage.setItem("visitorPhoneNo",this.quote.shipperPhoneNo),localStorage.setItem("visitorPhonePrefix",this.quote.shipperPhonePrefix),localStorage.setItem("orderDetails",JSON.stringify(t)),this.geocodeAddress(s,a,o)}));else if(this.orderId&&localStorage.getItem("orderDetails")){const e=JSON.parse(localStorage.getItem("orderDetails"));this.quote.lift=e.isLift,this.quote.driverHelpLoading=e.isNeedLoadHelp,this.quote.driverHelpUnloading=e.isNeedUnloadHelp,this.quote.size=e.description||"",this.quote.fromAddress=e.addressFrom,this.quote.toAddress=e.addressTo,this.shipperFormShow=!!e.vatEu,this.quote.shipperNameOrVatNo=this.quote.shipperVatNo=e.vatEu?e.vatEu:"",this.quote.shipperCountryCode=this.quote.shipperVatPrefix=e.vatEu?e.vatEu.slice(0,2):"",this.quote.shipperAddress=e.companyAddress||"",this.quote.shipperName=e.companyName||"",this.quote.shipperEmail=e.mailAddress||"",this.quote.shipperPhoneNo=e.phoneNumber||"",this.quote.shipperContactPerson=e.contactPerson||"",this.quote.fromCompanyName=e.companyFrom||"",this.quote.toCompanyName=e.companyTo||"",this.quote.fromDetails=e.deliveryDetailsFrom||"",this.quote.toDetails=e.deliveryDetailsTo||"",this.quote.fromCity=e.cityFrom||"",this.quote.toCity=e.cityTo||"";const t=e.cityFrom.split(", ");!this.quote.fromCompanyName&&t.length>3?(this.quote.fromCompanyName=t[0],this.quote.fromAddress=t[1],this.quote.fromCity=t[2]):!this.quote.fromAddress&&t.length>2&&(this.quote.fromAddress=t[0],this.quote.fromCity=t[1]);const o=e.cityTo.split(", ");!this.quote.toCompanyName&&o.length>3?(this.quote.toCompanyName=o[0],this.quote.toAddress=o[1],this.quote.toCity=o[2]):!this.quote.toAddress&&o.length>2&&(this.quote.toAddress=o[0],this.quote.toCity=o[1])}},setupStepChange(){window.addEventListener("hashchange",()=>{const i=location.hash.substring(1);if(i<1||i>4)return;const e=document.querySelector('.nav-link[data-bs-target="#step'+i+'"]');V.getOrCreateInstance(e).show(),Array.prototype.forEach.call(e.parentElement.parentElement.children,t=>t.classList.remove("active")),e.parentElement.classList.add("active"),scrollTo(0,0),this.currentStep=i}),location.hash="#1"},setupTooltips(){document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(i=>new H(i))},showLeadCollectionModal(){var e;new m(document.getElementById("leadCollectionModal"),{backdrop:"static",keyboard:!1}).show(),(e=document.querySelector(".modal-backdrop"))==null||e.remove()},validateLead(){setTimeout(()=>this.leadValid=E.validate(this.quote.shipperEmail),0)},changeVanType(){this.cargoDetails.pallets.quantity>this.cargoDetails.maxPallets&&(this.cargoDetails.pallets.quantity=this.cargoDetails.maxPallets),this.datetimeSelection.getCalendar().then(()=>{this.getPrice().then(()=>{var i;this.datetimeSelection.calendar.availableDates.includes((i=this.quote.pickupDate)==null?void 0:i.toISOString().substring(0,10))||this.unselectProduct()})}),this.cargoDetails.fullTruck.isNonstandardTruck=!1},unselectProduct(){this.quote.lastSelectedProduct=this.quote.product,this.quote.product=null,this.datetimeSelection.resetModal(null,!0),this.datetimeSelection.saveDate()},outOfOffice(){const t=new Date;return t.toLocaleTimeString("pl-PL",{timeZone:"Europe/Warsaw"})<"08:00"||t.toLocaleTimeString("pl-PL",{timeZone:"Europe/Warsaw"})>"16:45"||t.getDay()===6||t.getDay()===0||this.datetimeSelection.calendar.holidaysPoland.includes(t.toISOString().substring(0,10))},getShipper(){var i;this.quote.shipperName=this.quote.shipperAddress=null,this.quote.shipperVatNo=(i=this.quote.shipperVatNo)==null?void 0:i.replace(/[^a-zA-Z0-9]/g,""),/[a-zA-Z]{2}[a-zA-Z0-9]{5,}/.test(this.quote.shipperVatNo)&&this.reCaptcha("getShipper").then(e=>fetch(`${c.API_VAT_URL}?countryCode=${this.quote.shipperVatNo.substring(0,2).toUpperCase()}&vatNumber=${this.quote.shipperVatNo.substring(2).toUpperCase()}&captcha=${e}`)).then(e=>e.json().then(t=>({ok:e.ok,status:e.status,json:t}))).then(e=>{if(!e.ok)throw new Error("Shipper error: "+e.status+" "+e.statusText+" "+JSON.stringify(e.json));return e.json}).then(e=>{console.log("Shipper:",e),this.error=!1,this.quote.shipperName=e.name,this.quote.shipperAddress=e.address}).catch(e=>{var t;this.error=!0,console.error(e),(t=window.Sentry)==null||t.captureException(e)})},getPrice(){return this.loading=!0,this.quote.economyOption&&(this.quote.economyOption.price=0),this.reCaptcha("getPrice").then(i=>{var t,o,s,a,n,l,h,d,y,g;const e={countryFrom:this.quote.fromCountry,countryTo:this.quote.toCountry,postcodeTo:this.quote.toPostcode,postcodeFrom:this.quote.fromPostcode,latitudeFrom:(t=this.quote.fromPosition)==null?void 0:t.split(",")[0],longitudeFrom:(o=this.quote.fromPosition)==null?void 0:o.split(",")[1],latitudeTo:(s=this.quote.toPosition)==null?void 0:s.split(",")[0],longitudeTo:(a=this.quote.toPosition)==null?void 0:a.split(",")[1],distance:(h=(l=this.quote.distance)!=null?l:(n=this.quote.routes)==null?void 0:n.classicRoute.distance)!=null?h:0,vehicle:this.quote.van,ferry:(g=(y=this.quote.ferry)!=null?y:(d=this.quote.routes)==null?void 0:d.classicRoute.ferry)!=null?g:!1,loadDate:this.formatDate(this.quote.pickupDate),unloadDate:this.formatDate(this.quote.deliveryDate),weight:this.cargoDetails.totalCargoWeight||0,isLift:this.quote.lift,isNeedLoadHelp:this.quote.driverHelpLoading,isNeedUnloadHelp:this.quote.driverHelpUnloading,captcha:i,isPayNow:D.paymentOption===w.PayNow,isNonstandardTruck:this.cargoDetails.fullTruck.isNonstandardTruck||this.cargoDetails.pallets.quantity>8,discountCode:this.discountCode};return this.quote.shipperVatNo&&(e.vatNr=this.quote.shipperVatNo),this.cargoDetails.isAnyLoadSelected&&(e.isFullTruck=this.cargoDetails.isFullTruck,e.orderLoadDetails=JSON.stringify(this.cargoDetails.loads)),fetch((this.quote.pickupDate?c.API_PRICING_FINAL_URL:c.API_PRICING_GENERAL_URL)+`?${new URLSearchParams(e)}`)}).then(i=>i.text().then(e=>({ok:i.ok,status:i.status,text:e}))).then(i=>{if(!i.ok)throw new Error("Price error: "+i.status+" "+i.text);const e=JSON.parse(i.text);this.error=!1,this.loading=!1,this.priceId=e.id;let t=this.quote.product===u.economy||this.quote.product===u.economyPlus;this.isSoloForEconomy=e.economyOption.type===O.solo;const o=e.premiumPlusOption.type==O.solo||t&&this.isSoloForEconomy;this.isSoloVan!==o&&(this.isSoloVan=o,this.shouldShowOptionsUpdateModal()&&(this.quote.van="plane",this.showOptionsUpdateModal(),this.getPrice())),this.quote.premiumPrice=e.premiumOption.price,this.quote.premiumPlusPrice=e.premiumPlusOption.price,this.quote.economyOption=e.economyOption,this.quote.economyPlusOption=e.economyPlusOption,this.scandinaviaDisabled=this.quote.isScandinaviaDisabled(e.premiumPlusOption),this.quote.isEconomy?e.economyOption.economyPriceAvailability.isEconomyAvailable?(this.quote.price=this.quote.product===u.economy?this.quote.economyOption.price:this.quote.economyPlusOption.price,this.quote.discounts=this.quote.product===u.economy?e.economyOption.discount:e.economyPlusOption.discount,this.economyUnavailabilityReason=null):(this.quote.price=null,this.quote.discounts=null,this.handleEconomyNotAvailableAnymore(e.economyOption.economyPriceAvailability.unavailabilityReason)):this.quote.product===u.premium?(this.quote.price=this.quote.premiumPrice,this.quote.discounts=e.premiumOption.discount):this.quote.product===u.premiumPlus?(this.quote.price=this.quote.premiumPlusPrice,this.quote.discounts=e.premiumPlusOption.discount):(this.quote.discounts=e.economyPlusOption.economyPriceAvailability.isEconomyAvailable?e.economyPlusOption.discount:e.economyOption.economyPriceAvailability.isEconomyAvailable?e.economyOption.discount:e.premiumOption?e.premiumOption.discount:e.premiumPlusOption.premiumPriceAvailability.isPremiumAvailable?e.premiumPlusOption.discount:null,this.quote.price=null),e.economyOption.economyPriceAvailability.isEconomyAvailable?this.economyUnavailabilityReason=null:this.economyUnavailabilityReason=e.economyOption.economyPriceAvailability.unavailabilityReason,this.quote.duty=e.isDutyRequired,this.getOrderId()}).catch(i=>{var e,t,o;this.error=!0,this.quote.premiumPrice=0,this.quote.price=0,this.quote.economyOption={price:0,economyPriceAvailability:{isEconomyAvailable:!1}},console.error(i),(e=window.Sentry)==null||e.captureException(i),this.quote.pickupDate?this.isFirstStepFormValid()?new m(document.getElementById("errorModal")):this.handleEconomyNotAvailableAnymore("api-error"):new m(document.getElementById((t=i.message)!=null&&t.includes("403")?(o=i.message)!=null&&o.includes("contact-required")?"noRouteModal":"unavailableModal":"errorModal")).show()})},handleEconomyNotAvailableAnymore(i){if(this.quote.product!==u.premium){if(this.unselectProduct(),!this.economyUnavailabilityReason){if(i===this.economyUnavailabilityReasons.notCurtainSider){const e=document.getElementById("wrongVanTypeEconomyModal");new m(e,{backdrop:"static",keyboard:!1}).show()}else if(i===this.economyUnavailabilityReasons.entireVanSelected){const e=document.getElementById("entireVanEconomyModal");new m(e,{backdrop:"static",keyboard:!1}).show()}else if(i!==this.economyUnavailabilityReasons.dutyRequired){const e=document.getElementById("wrongLoadEconomyModal");new m(e,{backdrop:"static",keyboard:!1}).show()}}this.economyUnavailabilityReason=i}},getRoute(){this.quote.from&&this.routeService.getRoute(this.quote,this.i18n).then(i=>{if(console.log("Routes:",i.classicRoute,i.premiumPlusRoute),this.quote.fromEst){const e=this.quote.from.split(", ");this.quote.fromCompanyName=e[0],this.quote.fromAddress=this.quote.from?i.classicRoute.routes[0].legs[0].start_address:null}if(this.quote.toEst){const e=this.quote.to.split(", ");this.quote.toCompanyName=e[0],this.quote.toAddress=this.quote.to?i.classicRoute.routes[0].legs[0].end_address:null}this.quote.distance=i.classicRoute.distance,this.quote.ferry=i.classicRoute.ferry,this.quote.routes=i,this.shippingFormShow=!0,this.locationFormShow=!1,this.getPrice()}).catch(i=>{var e;this.error=!0,console.error("Route error:",i),(e=window.Sentry)==null||e.captureException(i),new m(document.getElementById(i.code==="ZERO_RESULTS"?"unavailableModal":"errorModal")).show()})},goTo(i){location.hash="#"+i,this.maxStep=Math.max(i,this.maxStep),i===3&&this.sendSummaryReport(),i===2&&this.companyDetailsSubmited&&(this.companyDetailsSubmited=!1),i>1&&this.submitForm(i===2?"transport-details":i===3&&this.quote.fromAddress&&this.quote.toAddress?"delivery-details":"company-details")},goToPaymentType(){this.goTo(1),setTimeout(()=>{document.getElementById("paymentSection").scrollIntoView({behavior:"smooth"})},1e3)},editPickupAddress(){this.quote.fromCompanyName||(this.shippingFormShow=!1),this.changeIndex=0,this.temporaryAddress={from:this.quote.from,fromCompanyName:this.quote.fromCompanyName,fromAddress:this.quote.fromAddress,fromCity:this.quote.fromCity,fromDetails:this.quote.fromDetails,fromCountry:this.quote.fromCountry,fromPostcode:this.quote.fromPostcode},this.goTo(4)},editDeliveryAddress(){this.quote.toCompanyName||(this.shippingFormShow=!1),this.changeIndex=1,this.temporaryAddress={to:this.quote.to,toCompanyName:this.quote.toCompanyName,toAddress:this.quote.toAddress,toDetails:this.quote.toDetails,toCity:this.quote.toCity,toCountry:this.quote.toCountry,toPostcode:this.quote.toPostcode},this.goTo(4)},cancelEditingAddress(){Object.assign(this.quote,this.temporaryAddress),location.hash="3"},sendSummaryReport(){var i,e,t,o,s,a,n;this.orderId&&(this.quote.transitTime=this.getSelectedProductRoute().transitTime,fetch(`${c.API_ORDERS_URL}/${this.orderId}/summary`,{headers:{"Content-Type":"application/json"},method:"PATCH",body:JSON.stringify({countryFrom:this.quote.fromCountry,cityFrom:this.quote.fromCity,companyNameFrom:this.quote.fromCompanyName,addressFrom:this.quote.fromAddress,postcodeFrom:this.quote.fromPostcode,isPoiFrom:this.quote.fromEst,countryTo:this.quote.toCountry,cityTo:this.toCity,companyNameTo:this.quote.toCompanyName,addressTo:this.quote.toAddress,postcodeTo:this.quote.toPostcode,isPoiTo:this.quote.toEst,vehicleType:this.quote.van,isLift:this.quote.lift,isFullTruck:this.cargoDetails.fullTruck.selected,orderLoadDetails:this.cargoDetails.loads,pickupDate:this.formatDate(this.quote.pickupDate),pickupDateTo:this.formatDate(this.quote.economyPickupDate),deliveryDate:this.formatDate(this.quote.deliveryDate),deliveryDateTo:this.formatDate(this.quote.deliveryDateTo),deliveryTime:(t=(e=this.quote.transitTime)!=null?e:(i=this.quote.routes)==null?void 0:i.classicRoute.transitTime)!=null?t:0,deliveryType:(o=this.quote.deliveryVariant)!=null?o:"",product:this.quote.product,priceId:this.priceId,description:this.quote.size,deliveryDetailsFrom:this.quote.fromDetails,deliveryDetailsTo:this.quote.toDetails,vatEu:this.quote.shipperVatNo,companyName:this.quote.shipperName,companyAddress:this.quote.shipperAddress,mailAddress:this.quote.shipperEmail,contactPerson:this.quote.shipperContactPerson,countryCode:this.quote.shipperPhonePrefix,phoneNumber:this.quote.shipperPhoneNo,distance:(n=(a=this.quote.distance)!=null?a:(s=this.quote.routes)==null?void 0:s.classicRoute.distance)!=null?n:0,weight:this.cargoDetails.totalCargoWeight,clientId:this.clientId,step:3,sessionId:this.getGoogleAnalyticsSessionId(),device:this.getUserDeviceType(),timezone:this.getUserTimezone(),language:`LANG_${this.i18n.current.toUpperCase()}`,SendSmCart:!!this.quote.shipperEmail&&!this.wasSmCartSent&&!!this.quote.shipperVatNo,isNeedLoadHelp:this.quote.driverHelpLoading,isNeedUnloadHelp:this.quote.driverHelpUnloading,url:location.href,vehicleSize:this.isSoloVan?"solo":"van"})}).then(l=>{if(!l.ok)throw new Error("Form submission error: "+l.status+" "+l.statusText);console.log("Google Analitycs report send succesfully. ")}).catch(l=>{var h;console.error(l),(h=window.Sentry)==null||h.captureException(l)}))},getOrderId(){this.orderId||this.reCaptcha("getOrderId").then(i=>{var e;return fetch(`${c.API_ORDERS_URL}?captcha=${i}&cidSm=${this.cidSm}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({countryFrom:this.quote.fromCountry,cityFrom:this.quote.fromCity,countryTo:this.quote.toCountry,cityTo:this.quote.toCity,postcodeFrom:this.quote.fromPostcode,postcodeTo:this.quote.toPostcode,vehicleType:this.quote.van,isLift:this.quote.lift,distance:this.quote.distance||((e=this.quote.routes)==null?void 0:e.premiumPlusRoute.distance),price:this.quote.premiumPrice,clientId:this.clientId,sessionId:this.getGoogleAnalyticsSessionId(),device:this.getUserDeviceType(),timezone:this.getUserTimezone(),url:location.href,referralCode:this.referralCode})})}).then(i=>i.json().then(e=>({ok:i.ok,status:i.status,json:e}))).then(i=>{if(!i.ok)throw new Error("Cannot get order ID: "+i.status+" "+i.statusText+" "+JSON.stringify(i.json));return i.json}).then(i=>{console.log("Order ID:",i.orderId),this.orderId=i.orderId,this.dataLayerSend||(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"orderBeginId","order-id":i.orderId,value:this.getSummaryPrice()}),this.dataLayerSend=!0),this.redundantClientId()}).catch(i=>{var e;console.error(i),(e=window.Sentry)==null||e.captureException(i)})},redundantClientId(){setTimeout(()=>{const i={};let e=localStorage.getItem("clientId");document.cookie.split(";").forEach(t=>{const o=t.split("="),s=o[0].trim();i[s]=o[1],s==="_ga"&&(e=i._ga.substring(6))}),this.reCaptcha("getOrderId").then(t=>fetch(`${c.API_ORDERS_URL}/${this.orderId}/begin`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({countryFrom:this.quote.fromCountry,cityFrom:this.quote.fromCity,countryTo:this.quote.toCountry,cityTo:this.quote.toCity,postcodeFrom:this.quote.fromPostcode,postcodeTo:this.quote.toPostcode,vehicleType:this.quote.van,isLift:this.quote.lift,distance:this.quote.distance,price:this.quote.directPrice,clientId:e,sessionId:this.getGoogleAnalyticsSessionId(),device:this.getUserDeviceType(),timezone:this.getUserTimezone(),url:location.href})})).catch(t=>{var o;console.error(t),(o=window.Sentry)==null||o.captureException(t)})},3e3)},submitForm(i){var o;if(!this.orderId)return;const e=new Date(this.quote.pickupDate),t=new Date((o=this.quote.economyPickupDate)!=null?o:this.quote.pickupDate);e.setHours(this.quote.pickupTime.from),t.setHours(this.quote.pickupTime.to),this.reCaptcha("submitForm").then(s=>{var a,n,l,h,d,y,g;return fetch(`${c.API_ORDERS_URL}/${this.orderId}?captcha=${s}&cidSm=${this.cidSm}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({countryFrom:this.quote.fromCountry,cityFrom:this.quote.fromCity,companyNameFrom:this.quote.fromCompanyName,addressFrom:this.quote.fromAddress,postcodeFrom:this.quote.fromPostcode,isPoiFrom:this.quote.fromEst,countryTo:this.quote.toCountry,cityTo:this.quote.toCity,companyNameTo:this.quote.toCompanyName,addressTo:this.quote.toAddress,postcodeTo:this.quote.toPostcode,isPoiTo:this.quote.toEst,vehicleType:this.quote.van,isLift:this.quote.lift,isFullTruck:this.cargoDetails.fullTruck.selected,orderLoadDetails:this.cargoDetails.loads,pickupDate:this.formatDate(e),pickupDateTo:this.formatDate(t),deliveryDate:this.formatDate(this.quote.deliveryDate),deliveryDateTo:this.formatDate(this.quote.deliveryDateTo),deliveryTime:(l=(n=this.quote.transitTime)!=null?n:(a=this.quote.routes)==null?void 0:a.classicRoute.transitTime)!=null?l:0,deliveryType:(h=this.quote.deliveryVariant)!=null?h:"",product:this.quote.product,priceId:this.priceId,description:this.quote.size,deliveryDetailsFrom:this.quote.fromDetails,deliveryDetailsTo:this.quote.toDetails,vatEu:this.quote.shipperVatNo,companyName:this.quote.shipperName,companyAddress:this.quote.shipperAddress,mailAddress:this.quote.shipperEmail,contactPerson:this.quote.shipperContactPerson,countryCode:this.quote.shipperPhonePrefix,phoneNumber:this.quote.shipperPhoneNo,distance:(g=(y=this.quote.distance)!=null?y:(d=this.quote.routes)==null?void 0:d.classicRoute.distance)!=null?g:0,weight:this.cargoDetails.totalCargoWeight,clientId:this.clientId,step:i,language:`LANG_${this.i18n.current.toUpperCase()}`,SendSmCart:!!this.quote.shipperEmail&&!this.wasSmCartSent&&!!this.quote.shipperVatNo,isNeedLoadHelp:this.quote.driverHelpLoading,isNeedUnloadHelp:this.quote.driverHelpUnloading,url:location.href,vehicleSize:this.isSoloVan?"solo":"van",discountCode:this.discountCode})})}).then(s=>s.text().then(a=>({ok:s.ok,status:s.status,text:a}))).then(s=>{if(!s.ok)throw new Error("Form submission error: "+s.status+" "+s.statusText+" "+s.text);!!this.quote.shipperEmail&&!this.wasSmCartSent&&!!this.quote.shipperVatNo&&(this.wasSmCartSent=!0),i=="transport-details"&&this.sendEventOnStep2(this.quote.product)}).catch(s=>{var a;console.error(s),(a=window.Sentry)==null||a.captureException(s)})},submitReport(i,e,t){const o=new Date(this.quote.pickupDate),s=new Date(this.quote.pickupDate);o.setHours(this.quote.pickupTime.from),s.setHours(this.quote.pickupTime.to),this.reCaptcha("submitReport").then(a=>{var n,l,h;return fetch(`${c.API_ORDERS_URL}${this.orderId?"/"+this.orderId:""}?captcha=${a}&cidSm=${this.cidSm}`,{method:this.orderId?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({countryFrom:this.quote.fromCountry,cityFrom:this.quote.fromCity,addressFrom:this.quote.fromAddress,postcodeFrom:this.quote.fromPostcode,countryTo:this.quote.toCountry,cityTo:this.quote.toCity,addressTo:this.quote.toAddress,postcodeTo:this.quote.toPostcode,vehicleType:this.quote.van,isLift:this.quote.lift,isFullTruck:this.cargoDetails.fullTruck.selected,orderLoadDetails:this.cargoDetails.loads,pickupDate:this.formatDate(o),pickupDateTo:this.formatDate(s),deliveryDate:this.formatDate(this.quote.deliveryDate),deliveryTime:(h=(l=this.quote.transitTime)!=null?l:(n=this.quote.routes)==null?void 0:n.classicRoute.transitTime)!=null?h:0,priceId:this.priceId,isNextBusinessDay:this.quote.nextDay,description:this.quote.size,deliveryDetailsFrom:this.quote.fromDetails,deliveryDetailsTo:this.quote.toDetails,vatEu:this.quote.shipperVatNo,companyName:this.quote.shipperName,companyAddress:this.quote.shipperAddress,mailAddress:this.quote.shipperEmail,countryCode:this.quote.shipperPhonePrefix,phoneNumber:this.quote.shipperPhoneNo,price:this.quote.premiumPrice,weight:this.cargoDetails.totalCargoWeight,clientId:this.clientId,messageContent:this.quote.loadDetails,isNonstandardRoute:!!i,isCompanyMissing:!!e,isIndividualQuote:!!t,language:`LANG_${this.i18n.current.toUpperCase()}`,SendSmCart:this.quote.shipperEmail&&!this.wasSmCartSent&&!!this.quote.shipperVatNo,isNeedLoadHelp:this.quote.driverHelpLoading,isNeedUnloadHelp:this.quote.driverHelpUnloading,url:location.href,referralCode:this.referralCode,vehicleSize:this.isSoloVan?"solo":"van"})})}).then(a=>a.text().then(n=>({ok:a.ok,status:a.status,text:n}))).then(a=>{if(!a.ok)throw new Error("Report submission error: "+a.status+" "+a.statusText+" "+a.text);console.log("Report submitted"),new m(document.getElementById("reportSentModal")).show()}).catch(a=>{var n;console.error(a),(n=window.Sentry)==null||n.captureException(a)})},book(){if(this.quote.paymentOption===w.PayNow)new m(document.getElementById("processingPaymentModal")).show(),B.goToPayment(this.orderId);else{if(!this.orderId)return;this.loading=!0,this.reCaptcha("book").then(i=>fetch(c.API_ORDERS_BOOKED_URL.replace("{orderId}",this.orderId)+"?captcha="+i,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isNextBusinessDay:this.outOfOffice(),clientId:this.clientId,sessionId:this.getGoogleAnalyticsSessionId(),device:this.getUserDeviceType(),timezone:this.getUserTimezone(),url:location.href})})).then(i=>i.text().then(e=>({ok:i.ok,status:i.status,text:e}))).then(i=>{if(!i.ok)throw new Error("Booking error: "+i.status+" "+i.statusText+" "+i.text)}).then(()=>{this.loading=!1,console.log("Booked order ID:",this.orderId),localStorage.setItem("isNotFirstOrder","1"),location.replace(`done.html?orderId=${encodeURIComponent(this.orderId)}&van=${this.quote.van}&price=${this.quote.premiumPrice}&lang=${this.i18n.current}&l=${new URLSearchParams(location.search).get("l")}`)}).catch(i=>{var e;console.error(i),(e=window.Sentry)==null||e.captureException(i),this.handleBookingError(i)})}},handleBookingError(i){this.loading=!1;const e="booking time error";i.message.includes(e)?this.handleSelectedDateExpiredError():this.sendFallbackBooking().then(t=>t&&this.showBookingErrorModal())},handleSelectedDateExpiredError(){this.unselectProduct(),this.maxStep=1;const i=document.getElementById("sessionExpiredErrorModal");new m(i,{backdrop:"static",keyboard:!1}).show()},sendFallbackBooking(){return fetch(c.API_ORDERS_BOOKED_FALLBACK_URL.replace("{orderId}",this.orderId),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isNextBusinessDay:this.outOfOffice(),sessionId:this.getGoogleAnalyticsSessionId(),device:this.getUserDeviceType(),timezone:this.getUserTimezone(),url:location.href})}).then(i=>{if(!i.ok)throw new Error("Fallback booking error: "+i.status+" "+i.statusText)}).then(i=>(this.loading=!1,console.log("Fallback booked order ID:",this.orderId),localStorage.setItem("isNotFirstOrder","1"),!0)).catch(i=>{var e;return console.error(i),(e=window.Sentry)==null||e.captureException(i),!1})},showBookingErrorModal(){const i="bookingErrorModal";new m(document.getElementById(i),{backdrop:"static",keyboard:!1}).show()},pdf(){this.reCaptcha("pdf").then(i=>{var e,t,o;this.pdfSrc=c.API_ORDERS_FILE_URL.replace("{orderId}",this.orderId)+"?captcha="+i+"#toolbar=0",((e=navigator.userAgent)==null?void 0:e.includes("Android"))||((o=(t=navigator.userAgentData)==null?void 0:t.platform)==null?void 0:o.includes("Android"))?window.open(this.pdfSrc,"_blank"):new m(document.getElementById("pdfModal")).show()})},getConfig(){return c},delay(i){setTimeout(i,10)},debounce(i){let e;return function(){clearTimeout(e),e=setTimeout(()=>i(),3e3)}},confirmChange(i){this.changeConfirmed[i]||(this.changeIndex=i,m.getOrCreateInstance(document.getElementById("confirmationModal")).show())},setupShipperAutocomplete(){const i=new U(document.getElementById("nameOrVatNo"),{data:[],maximumItems:11,onInput:e=>{i.setData([]),e.length>=3&&this.reCaptcha("getShipperCompanies").then(t=>fetch(`${c.API_COMPANIES_URL}?countryCode=${this.quote.shipperCountryCode}&text=${this.quote.shipperNameOrVatNo}&captcha=${t}`)).then(t=>t.json().then(o=>({ok:t.ok,status:t.status,json:o}))).then(t=>{if(!t.ok)throw new Error("Shipper companies error: "+t.status+" "+t.statusText+" "+JSON.stringify(t.json));return t.json}).then(t=>{console.log("Shipper companies:",t);const o=t?t.map(s=>({label:s.name,value:s.dunsNumber,html:`${s.name}<br><small>${s.address}</small>`.replace(e,"<b>"+e+"</b>")})):[];o.push({label:"",value:"",html:`<b class="text-info">${this.i18n.t("cantFindYourCompany")}</b><br><small class="text-primary">${this.i18n.t("enterYourCompanyDetails")}</small>`}),i.setData(o)}).catch(t=>{var o;console.error(t),(o=window.Sentry)==null||o.captureException(t),i.setData([{label:"",value:"",html:`<b class="text-info">${this.i18n.t("cantFindYourCompany")}</b><br><small class="text-primary">${this.i18n.t("enterYourCompanyDetails")}</small>`}])})},onSelectItem:({label:e,value:t})=>{console.log("Selected shipper company:",e,t),this.shipperFormShow=!0,t&&this.reCaptcha("getShipperCompany").then(o=>fetch(`${c.API_COMPANY_URL}/${t}?captcha=${o}`)).then(o=>o.json().then(s=>({ok:o.ok,status:o.status,json:s}))).then(o=>{if(!o.ok)throw new Error("Shipper company error: "+o.status+" "+o.statusText+" "+JSON.stringify(o.json));return o.json}).then(o=>{console.log("Shipper company:",o),this.quote.shipperName=o.name||"",this.quote.shipperAddress=o.address||"",this.quote.shipperVatNo=o.countryCode+o.vatNumber}).catch(o=>{var s;console.error(o),(s=window.Sentry)==null||s.captureException(o)})}})},collectLead(i){var e;return i&&!this.leadValid&&!this.emailChanged||!i&&(!((e=this.quote.shipperEmail)!=null&&e.length)||!this.emailChanged)?Promise.resolve(""):(this.loading=!0,this.companyDetailsSubmited=!0,this.reCaptcha("lead").then(t=>fetch(c.API_ORDERS_URL+"/init?captcha="+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.quote.shipperEmail,startPlace:this.quote.from,destinationPlace:this.quote.to,price:this.quote.premiumPrice,emailGate:i,language:`LANG_${this.i18n.current.toUpperCase()}`,countryCode:this.quote.shipperPhonePrefix,phoneNumber:this.quote.shipperPhoneNo})})).then(t=>t.text().then(o=>({ok:t.ok,status:t.status,text:o}))).then(t=>{if(!t.ok)throw new Error("Lead collection error: "+t.status+" "+t.statusText+" "+t.text);return this.wasSmCartSent=!1,this.emailChanged=i,this.leadValid=!1,localStorage.setItem("visitorEmail",this.quote.shipperEmail),this.getPrice()}).catch(t=>{var o;console.error(t),(o=window.Sentry)==null||o.captureException(t)}).finally(()=>{this.companyDetailsSubmited=!1,this.loading=!1}))},submitCompanyDetails(i){if(this.companyDetailsSubmited)return;const e=i.querySelector("#shipperAddress"),t=e.value.trim()?"":"This field cannot be empty or contain only whitespaces.";e.setCustomValidity(t),i.checkValidity()?(this.companyDetailsSubmited=!0,this.sendUserAgreements(),this.collectLead(!1).then(()=>{this.validated[1]=!0,this.goTo(3)})):(this.validated[1]=!0,this.scrollToFirstNonValidInput())},endFirstStep(){this.showErrorsOnFirstStep=!0,this.isFirstStepValid()?this.getPrice().then(()=>{this.isFirstStepValid()?this.quote.product===this.products.premium||this.quote.product===this.products.premiumPlus?this.vanSearchModalController.showVanSearchModal():this.goTo(2):setTimeout(()=>this.scrollToFirstNonValidInput(),0)}):setTimeout(()=>this.scrollToFirstNonValidInput(),0)},isFirstStepFormValid(){return document.getElementById("step1-form").checkValidity()},isFirstStepValid(){return this.isFirstStepFormValid()&&this.quote.pickupDate&&this.cargoDetails.isWeightCorrect&&this.quote.price},scrollToFirstNonValidInput(){const i=document.querySelector("[data-invalid=true], .form-control:invalid, #step3 .text-danger, .section-red-outline"),e=80,t=i?window.scrollY+i.getBoundingClientRect().top-e:0;scrollTo(0,t)},validateLastStep(){if(this.quote.from){const i=this.quote.from.split(", "),e=this.quote.to.split(", ");return i.length===4&&(this.quote.fromCompanyName=i[0]),e.length===4&&(this.quote.toCompanyName=e[0]),this.formValid=this.quote.pickupDate&&this.validated[1]&&this.quote.fromCompanyName&&this.quote.toCompanyName&&this.quote.fromAddress&&this.quote.toAddress,this.formValid}},geocodeAddress(i,e,t){var o=new google.maps.Geocoder;o.geocode({address:i},(s,a)=>{a==google.maps.GeocoderStatus.OK&&(t.append("fromPos",`${s[0].geometry.location.lat()},${s[0].geometry.location.lng()}`),o.geocode({address:e},(n,l)=>{l==google.maps.GeocoderStatus.OK&&(t.append("toPos",`${n[0].geometry.location.lat()},${n[0].geometry.location.lng()}`),window.location.href=`${window.location.origin}/form.html?${t.toString()}`)}))})},clearShipperForm(){this.quote.shipperNameOrVatNo=this.quote.shipperName=this.quote.shipperVatNo=this.quote.shipperAddress=this.quote.shipperEmail=this.quote.shipperPhoneNo=this.quote.shipperContactPerson=this.quote.termsAll=null,this.shipperFormShow=this.validated[1]=!1},clearShippingForm(){this.changeIndex?document.getElementById("toCompany").value=this.quote.toCompanyName=this.quote.toAddress=this.quote.toDetails=null:document.getElementById("fromCompany").value=this.quote.fromCompanyName=this.quote.fromAddress=this.quote.fromDetails=null,this.shippingFormShow=this.locationFormShow=this.validated[2]=!1},changeShippingAddress(){this.locationFormShow=!0,this.quoteFromTemp=this.quote.from},cancelChangeShippingAddress(){this.locationFormShow=!1,this.quote.from=this.quoteFromTemp},changeDeliveryAddress(){this.locationFormShow=!0,this.quoteToTemp=this.quote.to},cancelChangeDeliveryAddress(){this.locationFormShow=!1,this.quote.to=this.quoteToTemp},formatQuantity(i){return Number.isInteger(i)?"\u20AC"+i.toFixed(0).replace(".",","):"\u20AC"+i.toFixed(2).replace(".",",")},isMobileButtonDisabled(){return this.currentStep!="1"&&!this.quote.shipperAddress||this.currentStep=="4"&&(!this.quote.fromAddress&&!this.changeIndex||!this.quote.toAddress&&this.changeIndex)||this.error||!this.isFirstStepValid||this.loading||this.mobileOrderSummaryExpanding},isChangeAddressButtonDisabled(){return!this.quote.shipperAddress||this.error||this.loading||!this.changeIndex&&!this.quote.fromCompanyName||this.changeIndex&&!this.quote.toCompanyName},validateCustomQuote(){this.customQuoteContactValidated=!(!this.quote.shipperPhoneNo||!E.validate(this.quote.customQuoteShipperEmail));let i;return this.customQuote.isCargoDescriptionOnly?(this.customQuoteLiftValidated=this.customQuote.cargoDescription.length>0&&this.customQuote.cargoWeight.toString().length>0,i=this.customQuote.cargoDescription.length>0&&this.customQuote.cargoWeight.toString().length>0):(this.customQuoteLiftValidated=!!this.cargoDetails.loads.length,i=this.customQuoteLiftValidated),this.customQuotePickupAndDeliveryValidated=!1,this.customQuote.transportOptions&&(this.customQuote.transportOptions===v.fixedDate?this.datetimeSelection.pickupDate&&this.datetimeSelection.pickupTime&&this.datetimeSelection.customQuoteDeliveryDate&&this.datetimeSelection.deliveryTime&&(this.customQuotePickupAndDeliveryValidated=!0):this.customQuote.transportOptions===v.betweenDates?this.datetimeSelection.startOfRangePickup&&this.datetimeSelection.endOfRangePickup&&this.datetimeSelection.startOfRangeDelivery&&this.datetimeSelection.endOfRangeDelivery&&(this.customQuotePickupAndDeliveryValidated=!0):this.customQuotePickupAndDeliveryValidated=!0),this.customQuoteADRDescriptionValidated=!1,this.customQuote.isAdrMaterialsChecked?this.customQuote.adrMaterialsDescription.length>0&&(this.customQuoteADRDescriptionValidated=!0):this.customQuoteADRDescriptionValidated=!0,this.customQuoteLiftValidated&&this.customQuoteContactValidated&&i&&this.customQuotePickupAndDeliveryValidated&&this.customQuoteADRDescriptionValidated},sendCustomQuote(){var e,t,o;if(!this.validateCustomQuote()||this.customQuoteRequestSent)return;this.customQuoteRequestSent=!0;let i={CityFrom:this.quote.fromCity,AddressFrom:this.quote.from,CountryFrom:this.quote.fromCountry,CityTo:this.quote.toCity,AddressTo:this.quote.to,CountryTo:this.quote.toCountry,PostcodeFrom:this.quote.fromPostcode,PostcodeTo:this.quote.toPostcode,Distance:(o=(t=this.quote.distance)!=null?t:(e=this.quote.routes)==null?void 0:e.classicRoute.distance)!=null?o:0,IsPoiFrom:this.quote.fromEst,IsPoiTo:this.quote.toEst,VehicleType:this.quote.van,IsLift:this.customQuote.getOptionalServices().includes(P.tailLift),IsNeedLoadHelp:this.customQuote.getOptionalServices().includes(P.helpWithLoading),IsNeedUnloadHelp:this.customQuote.getOptionalServices().includes(P.helpWithUnloading),IsAdr:this.customQuote.getOptionalServices().includes(P.AdrMaterials),AdrDescription:this.customQuote.adrMaterialsDescription,CountryCode:this.quote.shipperPhonePrefix,PhoneNumber:this.quote.shipperPhoneNo,MailAddress:this.quote.customQuoteShipperEmail};if(this.customQuote.isCargoDescriptionOnly?(i.CargoDescription=this.customQuote.cargoDescription,i.CargoTotalWeight=this.customQuote.cargoWeight):i.OrderLoadDetails=this.cargoDetails.loads,this.customQuote.transportOptions===v.fixedDate){let s=new Date(this.datetimeSelection.pickupDate),a=this.datetimeSelection.pickupTime.label.split(":");s.setHours(parseInt(a[0],10),parseInt(a[1],10),0,0);let n=new Date(this.datetimeSelection.customQuoteDeliveryDate),l=this.datetimeSelection.deliveryTime.label.split(":");n.setHours(parseInt(l[0],10),parseInt(l[1],10),0,0),i.PickupDate=s,i.DeliveryDate=n}this.customQuote.transportOptions===v.betweenDates&&(i.PickupDate=new Date(this.datetimeSelection.startOfRangePickup),i.PickupDate.setHours(0,0,0,0),i.PickupDateTo=new Date(this.datetimeSelection.endOfRangePickup),i.PickupDateTo.setHours(0,0,0,0),i.DeliveryDate=new Date(this.datetimeSelection.startOfRangeDelivery),i.DeliveryDate.setHours(0,0,0,0),i.DeliveryDateTo=new Date(this.datetimeSelection.endOfRangeDelivery),i.DeliveryDateTo.setHours(0,0,0,0)),this.customQuote.transportOptions===v.noTimeYet&&(i.PickupDate=null,i.PickupDateTo=null,i.DeliveryDate=null,i.DeliveryDateTo=null),this.orderId&&se.sendCustomQuote(i,this.orderId).then(()=>{m.getOrCreateInstance(document.getElementById("customQuoteModal")).toggle(),m.getOrCreateInstance(document.getElementById("thankYouCustomQuote")).show()}).catch(s=>{var a;console.error(s),(a=window.Sentry)==null||a.captureException(s)})},isPalletsQuantityAboveLimits(){return this.cargoDetails.pallets.quantity>this.cargoDetails.limits.pallets},isPalletsWeightAboveLimits(){return this.cargoDetails.pallets.weight>this.cargoDetails.limits.weight||this.cargoDetails.fullTruck.weight>this.cargoDetails.entireVanLimits.weight},isBulkAboveLimits(){return this.cargoDetails.bulk.volume>this.cargoDetails.limits.capacity||this.cargoDetails.bulk.weight>this.cargoDetails.limits.weight},isCustomQuoteAboveLimits(i){return i.length>this.cargoDetails.limits.length||i.width>this.cargoDetails.limits.width||i.height>this.cargoDetails.limits.height||i.weight>this.cargoDetails.limits.weight},areAllCustomLoadsValid(){return this.cargoDetails.customLoads.every(i=>!this.isCustomQuoteAboveLimits(i))},isEntireVanWeightAboveLimits(){return this.cargoDetails.fullTruck.weight>this.cargoDetails.weightLimit},shouldShowCustomQuote(){const i=this.isPalletsQuantityAboveLimits()||this.isPalletsWeightAboveLimits()||this.isBulkAboveLimits()||this.isEntireVanWeightAboveLimits()||this.cargoDetails.totalCargoWeight>this.cargoDetails.limits.weight||this.cargoDetails.isLdmAboveLimits||!this.areAllCustomLoadsValid();this.customQuote.setCustomQuote(i)},decrementPalletCount(){this.cargoDetails.decrementPalletsCount(),this.delay(this.getPrice),this.shouldShowCustomQuote(),this.sendEventOnStep1(this.quote.product,"pallet")},incrementPalletCount(){this.cargoDetails.incrementPalletsCount(),this.delay(this.getPrice),this.shouldShowCustomQuote(),this.sendEventOnStep1(this.quote.product,"pallet")},removePallet(){this.cargoDetails.removePallets(),this.delay(this.getPrice),this.shouldShowCustomQuote()},changeTotalWeight(i){this.delay(this.getPrice),this.shouldShowCustomQuote(),this.sendEventOnStep1(this.quote.product,i)},removeBulk(){this.cargoDetails.removeBulk(),this.delay(this.getPrice),this.shouldShowCustomQuote()},changeBulkVolume(){this.delay(this.getPrice),this.shouldShowCustomQuote(),this.sendEventOnStep1(this.quote.product,"bulk")},changeBulkTotalWeight(){this.delay(this.getPrice),this.shouldShowCustomQuote(),this.sendEventOnStep1(this.quote.product,"bulk")},changeFullTruckTotalWeight(){this.delay(this.getPrice),this.cargoDetails.fullTruck.weight>this.cargoDetails.weightLimit?this.customQuote.setCustomQuote(!0):this.customQuote.setCustomQuote(!1),this.shouldShowCustomQuote(),this.sendEventOnStep1(this.quote.product,"van")},removeFullTruck(){this.cargoDetails.removeFullTruck(),this.delay(this.getPrice),this.customQuote.setCustomQuote(!1)},removeCustomLoad(i){this.cargoDetails.removeCustomLoad(i),this.delay(this.getPrice),this.shouldShowCustomQuote()},changeCustomLoadParams(i){this.delay(this.getPrice),this.shouldShowCustomQuote(),this.sendEventOnStep1(this.quote.product,"custom")},customQuoteProductMessage(){let i=[];return this.cargoDetails.pallets.weight>this.cargoDetails.limits.weight&&i.push("cargoWeightAbove"),this.cargoDetails.pallets.quantity>this.cargoDetails.limits.pallets&&i.push("cargoExceeding10pallets"),this.cargoDetails.bulk.volume>this.cargoDetails.limits.capacity&&i.push("cargoVolumeAbove"),this.cargoDetails.bulk.weight>this.cargoDetails.limits.weight&&i.push("cargoWeightAbove"),this.cargoDetails.customLoads.forEach(e=>{e.length>this.cargoDetails.limits.length&&i.push("cargoLengthAbove"),e.width>this.cargoDetails.limits.width&&i.push("cargoWidthAbove"),e.height>this.cargoDetails.limits.height&&i.push("cargoHeightAbove"),e.weight>this.cargoDetails.limits.weight&&i.push("cargoWeightAbove"),this.customQuote.isCustomQuote&&this.cargoDetails.customLoads.length>0&&i.push("cargoCustomLoadWarning")}),(this.cargoDetails.fullTruck.weight>this.cargoDetails.weightLimit||this.cargoDetails.totalCargoWeight>this.cargoDetails.weightLimit)&&i.push("cargoWeightAbove"),i.length?i.length>1?"customQuoteGenericMessage":i[0]:null},backToHome(){window.location="/"},getSelectedProductRoute(){var i;return this.quote.product===u.premiumPlus?this.quote.routes.premiumPlusRoute:(i=this.quote.routes)==null?void 0:i.classicRoute},showOptionsUpdateModal(){const i=document.getElementById("optionsUpdatedModal");new m(i,{backdrop:"static",keyboard:!1}).show()},shouldShowOptionsUpdateModal(){return this.quote.van!="plane"},getInfoAboutEconomy(){switch(this.economyUnavailabilityReason){case this.economyUnavailabilityReasons.notCurtainSider:return"changeVanTypeToCurtainSider";case this.economyUnavailabilityReasons.entireVanSelected:return"changeVanType";case this.economyUnavailabilityReasons.dutyRequired:return"notAvailableForCountriesCustomsClearance";case this.economyUnavailabilityReasons.weightTooLarge:case this.economyUnavailabilityReasons.ldmTooLarge:return"lowerYourCargoWeight";case this.economyUnavailabilityReasons.priceTooHigh:return"economyOptionsNotAvailable";default:return null}},mobileSummaryButtonOnClick(){this.customQuote.isCustomQuote||(this.mobileOrderSummaryExpanded=!1,document.querySelector(`#step${this.currentStep} form [type=submit]`).click())},toggleMobileSummary(){this.mobileOrderSummaryExpanding=!0,this.mobileOrderSummaryExpanded=!this.mobileOrderSummaryExpanded,setTimeout(()=>{this.mobileOrderSummaryExpanding=!1},300)},checkDiscount(){!this.discountCodeField||(this.discountCode=this.discountCodeField,this.getPrice().then(()=>{this.invalidDiscountCode=!this.quote.discounts.types.some(i=>i.name===k.discountCode),this.discountSet=this.quote.discounts.types.some(i=>i.name===k.discountCode)}).then(()=>{this.currentStep>1&&this.submitForm("company-details")}))},clearDiscount(){this.discountCode=null,this.discountCodeField=null,this.discountSet=!1,this.invalidDiscountCode=!1,this.getPrice().then(()=>{this.currentStep>1&&this.submitForm("company-details")})},showTotalCustomLoadTooltip(i){this.totalWeightTooltipVisible[i]=!0},hideTotalCustomLoadTooltip(i){this.totalWeightTooltipVisible[i]=!1},sendGAEventWithCaptcha(i,e,t=""){this.reCaptcha("gaEvent").then(o=>{ae.sendGAEvent(i,e,this.orderId,this.getGoogleAnalyticsSessionId(),this.getUserTimezone(),this.getUserDeviceType(),location.href,o,t)})},sendEventOnProductSelect(i){this.sendGAEventWithCaptcha(T.orderBegin,i)},sendEventOnDateConfirmed(i){this.sendGAEventWithCaptcha(T.orderConfirm,i)},sendEventOnStep2(i){this.sendGAEventWithCaptcha(T.orderStep2,i)},sendEventOnStep1(i,e){this.sendGAEventWithCaptcha(T.orderStep1,i,e)},sendUserAgreements(){this.reCaptcha("agreements").then(i=>{re.sendAgreements(this.quote.shipperEmail,this.userAgreements.email,this.userAgreements.sms,i)})},toggleAllTerms(){const i=!this.userAgreements.all;this.userAgreements.all=i,this.userAgreements.sms=i,this.userAgreements.done=i,this.userAgreements.email=i},updateAllCheckbox(){this.userAgreements.all=this.userAgreements.done&&this.userAgreements.email&&this.userAgreements.sms}});
