import{c as q,M as a,a as u}from"./style.199221b6.js";import{a as P,c as x}from"./app.bc396469.js";import{l as S}from"./lottie.2eed9a10.js";const l=document.querySelector("#carouselTestimonials .carousel-inside"),g=document.querySelector("#carouselTestimonials .carousel-container .card"),w=document.querySelector("#carouselTestimonials .carousel-container .card-container"),i=document.querySelector("#carouselTestimonials .track"),b=()=>{var s,r;const t=(r=(s=location.search)==null?void 0:s.split("?")[1])==null?void 0:r.split("&")[0],o=["","fret","transport-palette","meubles"].indexOf(t);return o===3&&x("fr"),o>-1?o:0};var T;P({variant:b(),version:new URLSearchParams(location.search).get("v"),certificateYear:"",quote:{from:null,fromCountry:null,fromPosition:null,fromPostcode:null,fromEst:!1,to:null,toCountry:null,toPosition:null,toPostcode:null,toEst:!1,van:"plane",shipperEmail:null,shipperPhonePrefix:((T=q.find(t=>t.code===navigator.language.substr(-2).toUpperCase()))==null?void 0:T.dial_code)||"+44",shipperPhoneNo:null},orderId:null,loading:!1,validated:!1,testimoniesIndex:0,testimoniesSwipeStartX:null,testimoniesSwipeStartY:null,testimoniesSwipeOffset:null,maxNextTestimonyPreview:100,isFirstOrder:!0,fromModal:!1,toModal:!1,validateInputs(t){let e=!0;const o=t.target.querySelectorAll("[data-validated]");for(const s of o)s.getAttribute("data-validated")!=="true"?(s.classList.add("invalid"),e=!1):s.classList.remove("invalid");return e},async performRequestForRouteAvailability(t){var r,d,m,h,f,p,y;if(!this.validateInputs(t))return;const e=document.getElementById("noRouteModal"),o=document.getElementById("unavailableModal"),s=document.getElementById("errorModal");if(!t.target.checkValidity())return new a(e).show(),!1;if(this.loading=!0,!this.quote.fromCountry||!this.quote.toCountry){new a(e).show(),this.loading=!1;return}try{const n=await this.reCaptcha("validateRoute"),c=await fetch(`${u.API_PRICING_VALIDATION_URL}?countryFrom=${this.quote.fromCountry}&countryTo=${this.quote.toCountry}&postcodeFrom=${this.quote.fromPostcode}&postcodeTo=${this.quote.toPostcode}&latitudeFrom=${(r=this.quote.fromPosition)==null?void 0:r.split(",")[0]}&longitudeFrom=${(d=this.quote.fromPosition)==null?void 0:d.split(",")[1]}&latitudeTo=${(m=this.quote.toPosition)==null?void 0:m.split(",")[0]}&longitudeTo=${(h=this.quote.toPosition)==null?void 0:h.split(",")[1]}&captcha=${n}`),v=await c.text();if(!c.ok)throw new Error("Validation error: "+c.status+" "+v);console.log("Route valid"),this.redirectToForm()}catch(n){console.error(n),(f=window.Sentry)==null||f.captureException(n),new a((p=n.message)!=null&&p.includes("403")?(y=n.message)!=null&&y.includes("contact-required")?e:o:s).show()}finally{this.loading=!1}},async validateRoute(t){await this.performRequestForRouteAvailability(t)},redirectToForm(){var e,o;const t=new URLSearchParams(location.search).get("kfl_ln");location.href=`form.html?from=${encodeURIComponent(this.quote.from)}&fromCnt=${this.quote.fromCountry}&fromPos=${this.quote.fromPosition}&fromPco=${this.quote.fromPostcode}&fromEst=${this.quote.fromEst}&to=${encodeURIComponent(this.quote.to)}&toCnt=${this.quote.toCountry}&toPos=${this.quote.toPosition}&toPco=${this.quote.toPostcode}&toEst=${this.quote.toEst}&van=${this.quote.van||"plane"}&v=${this.version}&lang=${this.i18n.current}&l=${((o=(e=location.search)==null?void 0:e.split("?")[1])==null?void 0:o.split("&")[0])||"main"}&cidSm=${new URLSearchParams(location.search).get("smclient")}${t?"&kfl_ln="+t:""}`},submitReport(){this.reCaptcha("submitReport").then(t=>fetch(u.API_ORDERS_URL+"?captcha="+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({countryFrom:this.quote.fromCountry,cityFrom:this.quote.from,postcodeFrom:this.quote.fromPostcode,countryTo:this.quote.toCountry,cityTo:this.quote.to,postcodeTo:this.quote.toPostcode,vehicleType:this.quote.van||"plane",mailAddress:this.quote.shipperEmail,countryCode:this.quote.shipperPhonePrefix,phoneNumber:this.quote.shipperPhoneNo,clientId:this.clientId,isNonstandardRoute:!0,referralCode:new URLSearchParams(location.search).get("kln_ln")})})).then(t=>{if(!t.ok)throw new Error("Report submission error: "+t.status+" "+t.statusText);console.log("Report submitted"),this.quote.from=this.quote.to=this.quote.van=this.validated=null,new a(document.getElementById("reportSentModal")).show()}).catch(t=>{var e;console.error(t),(e=window.Sentry)==null||e.captureException(t)})},getPrice(t){this.validateRoute(t)},isActiveTestimony(t){return t-1===this.testimoniesIndex},nextTestimony(){this.testimoniesIndex++;let t=this.testimoniesIndex*l.offsetWidth;if(t>=i.offsetWidth){this.testimoniesIndex--;return}let e=0;for(;e+g.offsetWidth<t;)e+=w.offsetWidth;i.style.transform=`translateX(-${e}px)`},previousTestimony(){if(this.testimoniesIndex===0)return;this.testimoniesIndex--;let t=this.testimoniesIndex*l.offsetWidth,e=0;for(;e+g.offsetWidth<t;)e+=w.offsetWidth;i.style.transform=`translateX(-${e}px)`},handleTestimoniesSwipeStart(t){this.testimoniesSwipeStartX=t.touches[0].screenX,this.testimoniesSwipeStartY=t.touches[0].screenY,this.testimoniesSwipeOffset=parseInt(i.style.transform.match(/\d/g).join(""))},handleTestimoniesSwipeEnd(t){if(i.style.transform=`translateX(-${this.testimoniesSwipeOffset}px)`,!t.cancelable)return;const e=t.changedTouches[0].screenX-this.testimoniesSwipeStartX;Math.abs(e)>this.maxNextTestimonyPreview&&(t.preventDefault(),e<0?this.nextTestimony():this.previousTestimony())},handleTestimoniesMove(t){const e=this.testimoniesSwipeStartX-t.changedTouches[0].screenX,o=this.testimoniesSwipeStartY-t.changedTouches[0].screenY;Math.abs(e)>Math.abs(o)&&this.testimoniesIndex*l.offsetWidth<i.offsetWidth&&(t.cancelable&&t.preventDefault(),i.style.transform=`translateX(-${this.testimoniesSwipeOffset+(Math.abs(e)>this.maxNextTestimonyPreview?e<0?-100:100:e)}px)`)},scrollToTestimony(t){this.testimoniesIndex=t-1,this.nextTestimony()},getTestimoniesPagesCount(){return Math.ceil(i.offsetWidth/l.offsetWidth)},getCampaignText(){return this.variant?["","areYouLookingForExpressShipping","tryQuoteGoBookPalletTransport","transportOfFurniture"][this.variant]:""},getConfig(){return u},getHeadingOnLP(){return this.variant?["expressVanTransport","shipYourFreight","tryQuoteGoPallet","transportOfFurnitureLP"][this.variant]:"expressVanTransport"},stopYouTubeVideo(t){document.getElementById(t).contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")},openFromModal(){this.fromModal=!0,this.$nextTick(()=>{document.getElementById("fromModalMobile").focus()})},openToModal(){this.toModal=!0,this.$nextTick(()=>{document.getElementById("toModalMobile").focus()})},getDemoVideoUrl(t){switch(t){case"fr":return"https://www.youtube-nocookie.com/embed/0HMN5npbVMw?version=3&enablejsapi=1";case"de":return"https://www.youtube-nocookie.com/embed/6jU81JQ6idc?version=3&enablejsapi=1";default:return"https://www.youtube-nocookie.com/embed/ySpVc-ZfFVE?version=3&enablejsapi=1"}}});innerWidth>=1200&&S.loadAnimation({container:document.querySelector(".background"),renderer:"canvas",path:"/background-min.json"});document.getElementsByTagName("video").length&&IntersectionObserver&&new IntersectionObserver((t,e)=>requestAnimationFrame(()=>{t.forEach(o=>{o.isIntersecting&&(o.target.src=o.target.dataset.src,o.target.load(),e.unobserve(o.target))})})).observe(document.getElementsByTagName("video")[0]);
