import{a as n}from"./style.199221b6.js";/* empty css             */import{a as c}from"./app.bc396469.js";class d{static sendOrderDoneRequest(r,t,o,a,s){if(!!r)return fetch(`${n.API_ORDERS_URL}/${r}/book-done`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isNextBusinessDay:o,clientId:localStorage.clientId,sessionId:t,timezone:a,device:s,url:location.href})})}}const l=6,p=0,i=new URLSearchParams(location.search);c({orderId:i.get("orderId"),pdfSrc:null,copy(){navigator.clipboard.writeText(this.orderId).then(()=>this.copied=!0)},pdf(e){!e&&this.pdfSrc||this.reCaptcha("pdf").then(r=>{e?fetch(n.API_ORDERS_FILE_URL.replace("{orderId}",this.orderId)+"?captcha="+r).then(t=>{if(!t.ok)throw new Error("PDF error: "+t.status+" "+t.statusText);return t.blob()}).then(t=>{const o=URL.createObjectURL(new Blob([t],{type:"application/pdf"})),a=document.createElement("a");a.href=o,a.download=`Booking_${this.orderId}_DoneDeliveries.pdf`,a.click(),setTimeout(()=>URL.revokeObjectURL(o),100)}).catch(t=>{var o;console.error(t),(o=window.Sentry)==null||o.captureException(t)}):this.pdfSrc=n.API_ORDERS_FILE_URL.replace("{orderId}",this.orderId)+"?captcha="+r+"#toolbar=0"})},getConfig(){return n},outOfOffice(){var r;const e=new Date;return e.toLocaleTimeString("pl-PL",{timeZone:"Europe/Warsaw"})<"08:00"||e.toLocaleTimeString("pl-PL",{timeZone:"Europe/Warsaw"})>"16:45"||e.getDay()===l||e.getDay()===p||((r=JSON.parse(localStorage.holidaysPoland))==null?void 0:r.includes(e.toISOString().substring(0,10)))},reportOrderDone(){d.sendOrderDoneRequest(this.orderId,this.getGoogleAnalyticsSessionId(),this.outOfOffice(),this.getUserTimezone(),this.getUserDeviceType()).catch(e=>console.error("Error while sending orderDone event: "+e.message))}});window.dataLayer=window.dataLayer||[];window.dataLayer.push({transactionId:i.get("orderId"),currency:"EUR",transactionTotal:i.get("price"),vanType:i.get("van")});
